"use strict";(self.webpackChunkacacia_p3=self.webpackChunkacacia_p3||[]).push([[606],{8606:(Tn,Q,i)=>{i.r(Q),i.d(Q,{ContractsModule:()=>mn});var C=i(6895),Z=i(9299),c=i(4006),I=i(8314),N=i(3151),p=i(4004),tt=i(9195),U=i(7802),V=i(8522),m=(()=>{return(a=m||(m={}))[a.Monthly=1]="Monthly",a[a.Quarterly=2]="Quarterly",a[a.SemiAnnual=3]="SemiAnnual",a[a.Yearly=4]="Yearly",m;var a})(),h=(()=>{return(a=h||(h={}))[a.Residential=1]="Residential",a[a.Commercial=2]="Commercial",h;var a})(),D=i(926);function k(a,o){const n=a.getFullYear(),e=a.getMonth(),l=a.getDate(),r=o.getFullYear(),s=o.getMonth();let f=r-n,A=s-e,u=o.getDate()-l,g=12*(r-n)+(s-e),_=r-n;const q=Math.round(Math.abs((o.getTime()-a.getTime())/864e5));return u<0&&(u+=new Date(r,s+1,0).getDate(),A--),A<0&&(A+=12,f--),{years:f,months:A,days:u,diffInDays:q,monthDifference:g,yearsDifference:_}}function G(a,o,n,e,l,r=0){const s=[];let A,u,g,_,d=new Date(a),f=new Date(a.getTime()+864e6);e===m.Monthly?(u=12,g=3e4,u=l):e===m.Quarterly?(u=4,g=9e4,u=l/3):e===m.SemiAnnual?(u=2,g=182e3,u=l/6):(u=1,g=365e3),A=+((o+n)/Math.round(u)).toFixed(2),r>0&&(_=+(r/Math.round(u)).toFixed(2)),s.push({issuingDate:d,dueDate:f,totalInvoiceValue:0===u?(o+n)/1:A,feesInvoiceValue:0,rentInvoiceValue:0,TaxesAmount:_||0});for(let E=1;E<u;E++){let q,B;d=new Date(d.getTime()+86400*g),f=new Date(d.getTime()+864e6),E===u-1&&(q=+(o+n-(A*u-1)).toFixed(2),B=+(r-(_*u-1)).toFixed(2)),s.push({issuingDate:d,dueDate:f,totalInvoiceValue:E===u-1?A+q:A,feesInvoiceValue:0,rentInvoiceValue:0,TaxesAmount:E===u-1?_+B:_})}return s}var t=i(4650),T=i(3848),nt=i(8112);let et=(()=>{class a{constructor(n){this.xhrService=n}searchRealEstate(n){return this.xhrService.call({url:"/api/RealEstate/Search",method:T.n.post,body:n}).pipe((0,p.U)(e=>e))}getRealEstateProperties(n){return this.xhrService.call({url:`api/Property/GetRealEstateProperties/${n}`,method:T.n.get,body:{}}).pipe((0,p.U)(e=>e))}getRealEstateOwner(n){return this.xhrService.call({url:`api/RealEstateOwner/Get/${n}`,method:T.n.get,body:{}}).pipe((0,p.U)(e=>e))}createContract(n){return this.xhrService.call({url:"api/Contract/Create",method:T.n.post,body:n}).pipe((0,p.U)(e=>e))}searchContracts(n){return this.xhrService.call({url:"api/Contract/SearchContract",method:T.n.post,body:n}).pipe((0,p.U)(e=>e))}deleteContract(n){return this.xhrService.call({url:`api/Contract/Delete/${n}`,method:T.n.delete,body:{}}).pipe((0,p.U)(e=>e))}getContractDetails(n){return this.xhrService.call({url:`/api/Contract/Get/${n}`,method:T.n.get,body:{}}).pipe((0,p.U)(e=>e))}generateContractFile(n){return this.xhrService.call({url:`/api/Contract/GenerateContractFile/${n}`,method:T.n.get,body:{}}).pipe((0,p.U)(e=>e))}updateContractStatus(n){return this.xhrService.call({url:"api/Contract/Update",method:T.n.post,body:n}).pipe((0,p.U)(e=>e))}}return a.\u0275fac=function(n){return new(n||a)(t.LFG(nt.d))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),y=(()=>{class a{constructor(n){this.contractsService=n}createContract(n){return this.contractsService.createContract(n).pipe((0,p.U)(e=>e))}generateContractFile(n){return this.contractsService.generateContractFile(n).pipe((0,p.U)(e=>e))}searchRealEstate(n){return this.contractsService.searchRealEstate(n).pipe((0,p.U)(e=>e))}searchContracts(n){return this.contractsService.searchContracts(n).pipe((0,p.U)(e=>e))}getRealEstateProperties(n){return this.contractsService.getRealEstateProperties(n).pipe((0,p.U)(e=>e))}getRealEstateOwner(n){return this.contractsService.getRealEstateOwner(n).pipe((0,p.U)(e=>e))}getContractDetails(n){return this.contractsService.getContractDetails(n).pipe((0,p.U)(e=>e))}deleteContract(n){return this.contractsService.deleteContract(n).pipe((0,p.U)(e=>e))}updateContractStatus(n){return this.contractsService.updateContractStatus(n).pipe((0,p.U)(e=>e))}}return a.\u0275fac=function(n){return new(n||a)(t.LFG(et))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var b=i(629),at=i(2289),F=i(5412),ot=i(6892),lt=i(4081),rt=i(5958),j=i(8425),S=i(8952),it=i(3496),ct=i(8412),st=i(8593),v=i(9383);const W=function(a,o){return{start:a,end:o}};function ut(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"locale-date-picker",43),t.NdJ("valueChanges",function(l){t.CHM(n);const r=t.oxw();return t.KtG(r.onChange(l))}),t.qZA()}if(2&a){const n=t.oxw();t.Q6J("label","LABELS.FORM.RENTAL_PERIOD")("FormControl",t.WLB(3,W,n.formControl("contractDuration","startDate"),n.formControl("contractDuration","endDate")))("isArabicDatePicker",!0)}}function pt(a,o){if(1&a&&t._UZ(0,"locale-date-picker",44),2&a){const n=t.oxw();t.Q6J("label","CONTRACTS.CONTRACT_DURATION")("FormControl",t.WLB(3,W,n.formControl("contractDuration","startDate"),n.formControl("contractDuration","endDate")))("isArabicDatePicker",!1)}}function dt(a,o){if(1&a&&(t.TgZ(0,"div",45)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",46)(5,"div")(6,"span"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span"),t._uU(10),t.qZA()(),t.TgZ(11,"div")(12,"span"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA()(),t.TgZ(17,"div")(18,"span"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"span"),t._uU(22),t.qZA()()()()),2&a){const n=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,7,"LABELS.RENTAL_PERIOD_AD")," : "),t.xp6(5),t.hij(" ",t.lcZ(8,9,"LABELS.YEARS")," "),t.xp6(3),t.hij(" ",n.calculatedContractDuration.years," "),t.xp6(3),t.hij(" ",t.lcZ(14,11,"LABELS.MONTHS")," "),t.xp6(3),t.hij(" ",n.calculatedContractDuration.months," "),t.xp6(3),t.hij(" ",t.lcZ(20,13,"LABELS.DAYS")," "),t.xp6(3),t.hij(" ",n.calculatedContractDuration.days," ")}}function Ct(a,o){if(1&a&&t._UZ(0,"locale-date-picker",44),2&a){const n=t.oxw();t.Q6J("label","LABELS.FORM.DATE_OF_BIRTH")("FormControl",n.formControl("contractParties","tenantBirthDay"))("isArabicDatePicker",!0)}}function At(a,o){if(1&a&&t._UZ(0,"locale-date-picker",44),2&a){const n=t.oxw();t.Q6J("label","LABELS.FORM.DATE_OF_BIRTH")("FormControl",n.formControl("contractParties","tenantBirthDay"))("isArabicDatePicker",!1)}}function _t(a,o){if(1&a&&(t.TgZ(0,"div",9),t._UZ(1,"form-input",19),t.qZA()),2&a){const n=t.oxw();t.xp6(1),t.Q6J("label","LABELS.VAT")("type",n.InputTypes.EMAIL)("FormControl",n.formControl("contractParties","vat"))}}function mt(a,o){if(1&a&&(t.TgZ(0,"div",9),t._UZ(1,"form-input",47),t.qZA()),2&a){const n=t.oxw();t.xp6(1),t.Q6J("label","LABELS.TOTAL_AMOUNT_OF_TAX")("iconClass",!0)("type",n.InputTypes.NUMBER)("FormControl",n.formControl("financialDetails","totalTaxesAmount"))("isReadonly",!0)}}function Tt(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"form-input",25),t.NdJ("valueChanges",function(){t.CHM(n);const l=t.oxw(2);return t.KtG(l.onTotalValueChange())}),t.qZA()}if(2&a){const n=t.oxw(2);t.Q6J("label","CONTRACTS.ELECTRICITY_FIXED_FEES")("type",n.InputTypes.NUMBER)("FormControl",n.formControl("financialDetails","electricityFixedFees"))}}function gt(a,o){if(1&a&&t._UZ(0,"form-input",19),2&a){const n=t.oxw(2);t.Q6J("label","CONTRACTS.ELECTRICITY_CONSUMPTION")("type",n.InputTypes.NUMBER)("FormControl",n.formControl("financialDetails","electricityConsumption"))}}function ft(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"form-input",25),t.NdJ("valueChanges",function(){t.CHM(n);const l=t.oxw(2);return t.KtG(l.onTotalValueChange())}),t.qZA()}if(2&a){const n=t.oxw(2);t.Q6J("label","CONTRACTS.GAS_FIXED_FEES")("type",n.InputTypes.NUMBER)("FormControl",n.formControl("financialDetails","gasFixedFees"))}}function Zt(a,o){if(1&a&&t._UZ(0,"form-input",19),2&a){const n=t.oxw(2);t.Q6J("label","CONTRACTS.GAS_CONSUMPTION")("type",n.InputTypes.NUMBER)("FormControl",n.formControl("financialDetails","gasConsumption"))}}function ht(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"form-input",25),t.NdJ("valueChanges",function(){t.CHM(n);const l=t.oxw(2);return t.KtG(l.onTotalValueChange())}),t.qZA()}if(2&a){const n=t.oxw(2);t.Q6J("label","CONTRACTS.WATER_FIXED_FEES")("type",n.InputTypes.NUMBER)("FormControl",n.formControl("financialDetails","waterFixedFees"))}}function Ot(a,o){if(1&a&&t._UZ(0,"form-input",19),2&a){const n=t.oxw(2);t.Q6J("label","CONTRACTS.WATER_CONSUMPTION")("type",n.InputTypes.NUMBER)("FormControl",n.formControl("financialDetails","waterConsumption"))}}const P=function(a){return{key:1,value:a}},M=function(a){return{key:2,value:a}},w=function(a,o){return[a,o]};function Et(a,o){if(1&a){const n=t.EpF();t.ynx(0),t.TgZ(1,"h6"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",14)(5,"div",48)(6,"form-input",49),t.NdJ("valueChanges",function(l){t.CHM(n);const r=t.oxw();return t.KtG(r.onFeesValueChange(l,r.formControl("financialDetails","electricityFixedFees"),r.formControl("financialDetails","electricityConsumption")))}),t.ALo(7,"translate"),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"div",9),t.YNc(11,Tt,1,3,"form-input",50),t.YNc(12,gt,1,3,"form-input",51),t.qZA()(),t.TgZ(13,"h6"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div",14)(17,"div",48)(18,"form-input",49),t.NdJ("valueChanges",function(l){t.CHM(n);const r=t.oxw();return t.KtG(r.onFeesValueChange(l,r.formControl("financialDetails","gasFixedFees"),r.formControl("financialDetails","gasConsumption")))}),t.ALo(19,"translate"),t.ALo(20,"translate"),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",9),t.YNc(23,ft,1,3,"form-input",50),t.YNc(24,Zt,1,3,"form-input",51),t.qZA()(),t.TgZ(25,"h6"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"div",14)(29,"div",48)(30,"form-input",49),t.NdJ("valueChanges",function(l){t.CHM(n);const r=t.oxw();return t.KtG(r.onFeesValueChange(l,r.formControl("financialDetails","waterFixedFees"),r.formControl("financialDetails","waterConsumption")))}),t.ALo(31,"translate"),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",9),t.YNc(35,ht,1,3,"form-input",50),t.YNc(36,Ot,1,3,"form-input",51),t.qZA()(),t.BQk()}if(2&a){const n=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,21,"CONTRACTS.ELECTRICITY_FEES"),": "),t.xp6(4),t.Q6J("label",t.lcZ(7,23,"CONTRACTS.ELECTRICITY_FEES"))("type",n.InputTypes.RADIO)("radioOptions",t.WLB(49,w,t.VKq(45,P,t.lcZ(8,25,"CONTRACTS.FIXED_AMOUNT")),t.VKq(47,M,t.lcZ(9,27,"CONTRACTS.CONSUMPTION"))))("FormControl",n.formControl("financialDetails","selectedElectricityOption")),t.xp6(5),t.Q6J("ngIf",1===n.formControl("financialDetails","selectedElectricityOption").value),t.xp6(1),t.Q6J("ngIf",2===n.formControl("financialDetails","selectedElectricityOption").value),t.xp6(2),t.hij("",t.lcZ(15,29,"CONTRACTS.GAS_FEES"),": "),t.xp6(4),t.Q6J("label",t.lcZ(19,31,"CONTRACTS.GAS_FIXED_FEES"))("type",n.InputTypes.RADIO)("radioOptions",t.WLB(56,w,t.VKq(52,P,t.lcZ(20,33,"CONTRACTS.FIXED_AMOUNT")),t.VKq(54,M,t.lcZ(21,35,"CONTRACTS.CONSUMPTION"))))("FormControl",n.formControl("financialDetails","selectedGasOption")),t.xp6(5),t.Q6J("ngIf",1===n.formControl("financialDetails","selectedGasOption").value),t.xp6(1),t.Q6J("ngIf",2===n.formControl("financialDetails","selectedGasOption").value),t.xp6(2),t.hij("",t.lcZ(27,37,"CONTRACTS.WATER_FEES"),": "),t.xp6(4),t.Q6J("label",t.lcZ(31,39,"CONTRACTS.WATER_FEES"))("type",n.InputTypes.RADIO)("radioOptions",t.WLB(63,w,t.VKq(59,P,t.lcZ(32,41,"CONTRACTS.FIXED_AMOUNT")),t.VKq(61,M,t.lcZ(33,43,"CONTRACTS.CONSUMPTION"))))("FormControl",n.formControl("financialDetails","selectedWaterOption")),t.xp6(5),t.Q6J("ngIf",1===n.formControl("financialDetails","selectedWaterOption").value),t.xp6(1),t.Q6J("ngIf",2===n.formControl("financialDetails","selectedWaterOption").value)}}function Lt(a,o){1&a&&(t.TgZ(0,"div",52),t._UZ(1,"i",53),t.TgZ(2,"p",54),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&a&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"LABELS.FORM.VALIDATIONS.COMMISSION_CAN_NOT_EXCEED")))}function Dt(a,o){1&a&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"CONTRACTS.TAX_VALUE")))}function vt(a,o){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a){const n=t.oxw().$implicit;t.xp6(1),t.AsE("",+(null==n.TaxesAmount?null:n.TaxesAmount.toFixed(2))," ",t.lcZ(2,2,"LABELS.SAR")," ")}}function Nt(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,vt,3,4,"td",26),t.qZA()),2&a){const n=o.$implicit,e=t.oxw(2);t.xp6(2),t.Oqu(t.xi3(3,5,n.issuingDate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(t.xi3(6,8,n.dueDate,"yyyy-MM-dd")),t.xp6(3),t.AsE("",+(null==n.totalInvoiceValue?null:n.totalInvoiceValue.toFixed(2))," ",t.lcZ(9,11,"LABELS.SAR")," "),t.xp6(2),t.Q6J("ngIf",e.isCommercialContract)}}function yt(a,o){if(1&a&&(t.TgZ(0,"div",55)(1,"h6"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"table")(5,"tr")(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.YNc(15,Dt,3,3,"th",26),t.qZA(),t.YNc(16,Nt,11,13,"tr",56),t.qZA()()),2&a){const n=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,6,"CONTRACTS.INSATLLMENTS_PAYMENT"),": "),t.xp6(5),t.hij(" ",t.lcZ(8,8,"PROPERTY.ISSUING_DATE")," "),t.xp6(3),t.hij(" ",t.lcZ(11,10,"CONTRACTS.DUE_DATE")," "),t.xp6(3),t.Oqu(t.lcZ(14,12,"CONTRACTS.INVOICE_VALUE")),t.xp6(2),t.Q6J("ngIf",n.isCommercialContract),t.xp6(1),t.Q6J("ngForOf",n.installmentPlanTable)}}function St(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.handleBack())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTIONS.BACK")," "))}function xt(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.handleNext())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTIONS.NEXT")," "))}const Y=function(a){return{list:a,key:"id",value:"name"}},Rt=function(a){return{list:a,key:"id",value:"propertyNumber"}},qt=function(a,o){return{checked:!0,key:a,value:o}},J=function(a,o){return{key:a,value:o}},It=function(a,o,n,e){return[a,o,n,e]};let $=(()=>{class a{constructor(n,e,l,r,s,d,f,A,u,g){this.fb=n,this.contractsLogicService=e,this.translationService=l,this.dialog=s,this.toastrService=d,this.activatedRoute=f,this.router=A,this.lookupsService=u,this.attchmentsService=g,this.selectedIndex=0,this.subs=new tt.t,this.editMode=!1,this.installmentPlanTable=[],this.isCommercialContract=!1,this.allowedTypes=["pdf","png","jpeg","tiff"],this.addEditContract=this.fb.group({contractDuration:this.fb.group({startDate:["",[c.kI.required]],endDate:["",[c.kI.required]],rentalperiod:[null],attachment:["",[c.kI.required]]}),propertyUnitDetails:this.fb.group({realEstateUseId:[null,[c.kI.required]],realEstateTypeId:[null,[c.kI.required]],realEstateId:[null,[c.kI.required]],propertyId:[null,[c.kI.required]]}),contractParties:this.fb.group({name:[""],nationalId:[null],tenantName:["",[c.kI.required]],tenantNationalId:[null,[c.kI.required,(0,D.FV)(),(0,D.Xi)()]],tenantBirthDay:["",[c.kI.required]],tenantTelephone:[null,[c.kI.required,,(0,D.FV)(),(0,D.Xi)()]],email:["",[c.kI.email]],idPhoto:["",[c.kI.required]],vat:[null]}),financialDetails:this.fb.group({annualRentalFees:[null,[c.kI.required]],electricityFixedFees:[null],services:[!1],electricityConsumption:[null],selectedElectricityOption:[null],selectedGasOption:[null],selectedWaterOption:[null],gasFixedFees:[null],gasConsumption:[null],waterFixedFees:[null],totalTaxesAmount:[0],waterConsumption:[null],paymentWay:[1,[c.kI.required]],totalValue:[null],insuranceAmount:[null,[c.kI.required]],commissionAmount:[null,[c.kI.required]]},{validators:(0,D.yN)("commissionAmount","annualRentalFees")})}),this.activatedRoute.queryParams.subscribe(_=>{this.isCommercialContract=_.isCommercial}),this.isCommercialContract&&this.addCommercialContractControls(),this.stepperOrientation=r.observe("(min-width: 800px)").pipe((0,p.U)(({matches:_})=>_?"horizontal":"vertical"))}ngOnInit(){this.realestateId=+this.activatedRoute.snapshot.params.id,this.editMode=!!this.realestateId,this.subs.add=this.translationService.currentLanguage$.subscribe(n=>{this.currentLang=n,this.propertyTypes$=this.lookupsService.getPropertyLookup("RealEstateType").pipe((0,N.d)(1)),this.propertyUsageTypes$=this.lookupsService.getPropertyLookup("RealEstateUse").pipe((0,N.d)(1))})}onChange(n){this.calculatedContractDuration=null,n.endValue&&(this.calculatedContractDuration=k(new Date(n.startValue),new Date(n.endValue)))}onPropertyTypeChange(n){this.formControl("propertyUnitDetails","realEstateId").reset(),this.formControl("propertyUnitDetails","propertyId").reset();const e={realEstateTypeId:this.formControl("propertyUnitDetails","realEstateTypeId").value,realEstateUseId:this.formControl("propertyUnitDetails","realEstateUseId").value};this.realEstateOptions$=this.contractsLogicService.searchRealEstate(e).pipe((0,N.d)(1))}onRealEstateChange(n){this.formControl("propertyUnitDetails","propertyId").reset(),this.subs.add=this.realEstateOptions$.subscribe(e=>this.realEstateName=e.find(l=>l.id===n.event.value).name),this.propertiesOptions$=this.contractsLogicService.getRealEstateProperties(n.event.value).pipe((0,N.d)(1)),this.contractsLogicService.getRealEstateOwner(n.event.value).subscribe(e=>{this.formControl("contractParties","name").setValue(e.name),this.formControl("contractParties","nationalId").setValue(e.ownerNationalId)})}onPropertyChange(n){this.subs.add=this.propertiesOptions$.subscribe(e=>this.unitNumber=+e.find(l=>l.id===n.event.value).propertyNumber)}onServicesChange(n){this.formControl("financialDetails","selectedGasOption").reset(),this.formControl("financialDetails","selectedElectricityOption").reset(),this.formControl("financialDetails","selectedWaterOption").reset(),this.formControl("financialDetails","electricityFixedFees").reset(),this.formControl("financialDetails","electricityConsumption").reset(),this.formControl("financialDetails","gasFixedFees").reset(),this.formControl("financialDetails","gasConsumption").reset(),this.formControl("financialDetails","waterFixedFees").reset(),this.formControl("financialDetails","waterConsumption").reset()}onFeesValueChange(n,e,l){1===n?this.setControlsValiditions(e,l):this.setControlsValiditions(l,e)}setControlsValiditions(n,e){n.addValidators([c.kI.required]),e.removeValidators([c.kI.required]),n.updateValueAndValidity(),e.updateValueAndValidity()}onTotalValueChange(){const n=this.formControl("financialDetails","gasFixedFees").value+this.formControl("financialDetails","electricityFixedFees").value+this.formControl("financialDetails","waterFixedFees").value+this.formControl("financialDetails","annualRentalFees").value+this.formControl("financialDetails","totalTaxesAmount").value;this.formControl("financialDetails","totalValue").setValue(n)}onAnnualFeesValueChange(){this.isCommercialContract?(this.formControl("financialDetails","totalTaxesAmount").setValue(.15*this.formControl("financialDetails","annualRentalFees").value),this.onTotalValueChange()):this.onTotalValueChange()}onSelection(n){this.selectedIndex=n.selectedIndex,4===this.selectedIndex&&this.formControl("financialDetails","annualRentalFees").value&&this.formControl("contractDuration","startDate")?.value&&(this.installmentPlanTable=G(new Date(this.formControl("contractDuration","startDate")?.value),this.formControl("financialDetails","annualRentalFees").value,this.formControl("financialDetails","gasFixedFees").value+this.formControl("financialDetails","electricityFixedFees").value+this.formControl("financialDetails","waterFixedFees").value,this.formControl("financialDetails","paymentWay").value,this.calculatedContractDuration.monthDifference,this.formControl("financialDetails","totalTaxesAmount").value))}handleNext(){this.selectedIndex<5&&this.selectedIndex++}handleBack(){this.selectedIndex>0&&this.selectedIndex--}handleCancel(){this.isCommercialContract?this.router.navigate(["/contracts/commercial"],{queryParams:{isCommercial:!0}}):this.router.navigateByUrl("/contracts/residential")}formControl(n,e){return this.addEditContract?.get(n)?.get(e)}formGroup(n){return this.addEditContract?.get(n)}onAddContract(n){const e={startDate:n.value.contractDuration.startDate,endDate:n.value.contractDuration.endDate,rentalperiod:this.calculatedContractDuration.diffInDays,annualRentalFees:n.value.financialDetails.annualRentalFees,electricityFixedFees:1===this.formControl("financialDetails","selectedElectricityOption").value?n.value.financialDetails.electricityFixedFees:null,electricityConsumption:2===this.formControl("financialDetails","selectedElectricityOption").value?n.value.financialDetails.electricityConsumption:null,attachment:n.value.contractDuration.attachment,gasFixedFees:1===this.formControl("financialDetails","selectedGasOption").value?n.value.financialDetails.gasFixedFees:null,gasConsumption:2===this.formControl("financialDetails","selectedGasOption").value?n.value.financialDetails.gasConsumption:null,waterFixedFees:1===this.formControl("financialDetails","selectedWaterOption").value?n.value.financialDetails.waterFixedFees:null,waterConsumption:2===this.formControl("financialDetails","selectedWaterOption").value?n.value.financialDetails.waterConsumption:null,totalValue:n.value.financialDetails.totalValue,insuranceAmount:n.value.financialDetails.insuranceAmount,commissionAmount:n.value.financialDetails.commissionAmount,paymentWay:n.value.financialDetails.paymentWay,contractType:this.isCommercialContract?h.Commercial:h.Residential,totalTaxesAmount:n.value.financialDetails.totalTaxesAmount?n.value.financialDetails.totalTaxesAmount:null,propertyId:n.value.propertyUnitDetails.propertyId,installment:this.installmentPlanTable,tenantData:{name:n.value.contractParties.tenantName,tenantNationalId:n.value.contractParties.tenantNationalId,telephone:n.value.contractParties.tenantTelephone,birthDay:n.value.contractParties.tenantBirthDay,email:n.value.contractParties.email,idPhoto:n.value.contractParties.idPhoto,vat:n.value.contractParties.vat?n.value.contractParties.vat:""}};this.contractsLogicService.createContract(e).subscribe(l=>{this.toastrService.showToastr("Contract Created successfully",V.V.success),this.isCommercialContract?this.router.navigate(["/contracts/commercial"],{queryParams:{isCommercial:!0}}):this.router.navigateByUrl("/contracts/residential")},()=>{this.toastrService.showToastr("An error occured when executing the create statement ,try again !",V.V.error)})}addCommercialContractControls(){this.formControl("contractParties","vat").setValidators(c.kI.required),this.formControl("financialDetails","totalTaxesAmount").setValidators(c.kI.required)}onContractFileChange(n,e){this.attachment={};const l=new FormData,r=n[0];l.append("Attachment",r,r.name),this.attachment=l,this.attchmentsService.uploadAttachments(this.attachment).subscribe(s=>{1===e?this.addEditContract.get("contractDuration")?.get("attachment")?.patchValue(s.fileName):this.addEditContract.get("contractParties")?.get("idPhoto")?.patchValue(s.fileName)})}get InputTypes(){return I.o}get PaymentWay(){return m}get Lang(){return U.U}ngOnDestroy(){this.subs.unsubscribe()}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(c.qu),t.Y36(y),t.Y36(b.D),t.Y36(at.Yg),t.Y36(F.uw),t.Y36(ot._),t.Y36(Z.gz),t.Y36(Z.F0),t.Y36(lt.K),t.Y36(rt.o))},a.\u0275cmp=t.Xpm({type:a,selectors:[["add-contract"]],decls:176,vars:228,consts:[["RtlDir","",1,"add-edit-page"],[1,"content-container"],["autocomplete","off",3,"formGroup","ngSubmit"],["RtlDir","",1,"form-stepper",3,"orientation","selectedIndex","selectionChange"],[3,"label","stepControl"],["autocomplete","off",3,"formGroup"],[1,"tab-container"],[1,"tab-headline"],[1,"form-wrapper"],[1,"form-control-wrapper"],[3,"label","FormControl","isArabicDatePicker","valueChanges",4,"ngIf"],[3,"label","FormControl","isArabicDatePicker",4,"ngIf"],["class","duration-container",4,"ngIf"],["label","CONTRACTS.UPLOAD_A_COPY_OF_CONTRACT_FILE","canAccept","application/pdf,image/png,image/jpeg,image/tiff\n                            ",3,"singleFile","formGroup","formControl","editMode","allowedTypes","onAttachmentChange"],[1,"form-row"],[3,"label","type","selectOptions","FormControl"],[3,"label","type","selectOptions","FormControl","selectedOption"],[3,"label","type","isReadonly","FormControl"],[3,"label","type","FormControl","isReadonly"],[3,"label","type","FormControl"],[1,"form-control-wrapper","mb-4"],["label","CONTRACTS.UPLOAD_A_COPY_OF_ID_PHOTO","canAccept","application/pdf,image/png,image/jpeg,image/tiff\n                            ",3,"singleFile","formGroup","formControl","editMode","allowedTypes","onAttachmentChange"],["class","form-control-wrapper",4,"ngIf"],[3,"label","iconClass","type","FormControl","valueChanges"],[1,"form-toggle-wrapper"],[3,"label","type","FormControl","valueChanges"],[4,"ngIf"],[1,"font-weight-bold"],[1,"mt-4"],[1,"form-radio-wrapper","mb-3"],[3,"label","type","radioOptions","FormControl"],[3,"label","type","FormControl","isReadonly","iconClass"],[3,"label","type","FormControl","iconClass"],["class","error-message",4,"ngIf"],[1,"details-container"],[1,"details-row"],[1,"details-col"],["class","details-container mt-3",4,"ngIf"],[1,"add-edit-actions","mt-1"],["type","button",1,"ac-btn","btn-outlined",3,"click"],["type","button","class","ac-btn btn-outlined",3,"click",4,"ngIf"],["type","button","class","ac-btn btn-fill",3,"click",4,"ngIf"],["type","submit",1,"ac-btn","btn-outlined",3,"disabled"],[3,"label","FormControl","isArabicDatePicker","valueChanges"],[3,"label","FormControl","isArabicDatePicker"],[1,"duration-container"],[1,"duration-wrapper"],[3,"label","iconClass","type","FormControl","isReadonly"],[1,"form-radio-wrapper"],[3,"label","type","radioOptions","FormControl","valueChanges"],[3,"label","type","FormControl","valueChanges",4,"ngIf"],[3,"label","type","FormControl",4,"ngIf"],[1,"error-message"],[1,"mat-error","fa-solid","fa-xmark"],[1,"mat-error"],[1,"details-container","mt-3"],[4,"ngFor","ngForOf"],["type","button",1,"ac-btn","btn-fill",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return e.onAddContract(e.addEditContract)}),t.TgZ(3,"mat-stepper",3),t.NdJ("selectionChange",function(r){return e.onSelection(r)}),t.ALo(4,"async"),t.TgZ(5,"mat-step",4),t.ALo(6,"translate"),t.TgZ(7,"form",5)(8,"div",6)(9,"h4",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",8)(13,"div",9),t.YNc(14,ut,1,6,"locale-date-picker",10),t.YNc(15,pt,1,6,"locale-date-picker",11),t.YNc(16,dt,23,15,"div",12),t.qZA(),t.TgZ(17,"div",9)(18,"upload-file",13),t.NdJ("onAttachmentChange",function(r){return e.onContractFileChange(r,1)}),t.qZA()()()()()(),t.TgZ(19,"mat-step",4),t.ALo(20,"translate"),t.TgZ(21,"form",5)(22,"div",6)(23,"h4",7),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"div",8)(27,"div",14)(28,"div",9),t._UZ(29,"form-input",15),t.ALo(30,"translate"),t.ALo(31,"async"),t.qZA(),t.TgZ(32,"div",9)(33,"form-input",16),t.NdJ("selectedOption",function(r){return e.onPropertyTypeChange(r)}),t.ALo(34,"translate"),t.ALo(35,"async"),t.qZA()()(),t.TgZ(36,"div",14)(37,"div",9)(38,"form-input",16),t.NdJ("selectedOption",function(r){return e.onRealEstateChange(r)}),t.ALo(39,"translate"),t.ALo(40,"async"),t.qZA()(),t.TgZ(41,"div",9)(42,"form-input",16),t.NdJ("selectedOption",function(r){return e.onPropertyChange(r)}),t.ALo(43,"translate"),t.ALo(44,"async"),t.qZA()()()()()()(),t.TgZ(45,"mat-step",4),t.ALo(46,"translate"),t.TgZ(47,"form",5)(48,"div",6)(49,"h4",7),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"div",8)(53,"h6"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"div",14)(57,"div",9),t._UZ(58,"form-input",17),t.qZA(),t.TgZ(59,"div",9),t._UZ(60,"form-input",18),t.qZA()(),t.TgZ(61,"h6"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"div",14)(65,"div",9),t._UZ(66,"form-input",19),t.qZA(),t.TgZ(67,"div",9),t._UZ(68,"form-input",19),t.qZA()(),t.TgZ(69,"div",20)(70,"upload-file",21),t.NdJ("onAttachmentChange",function(r){return e.onContractFileChange(r,2)}),t.qZA()(),t.TgZ(71,"div",14)(72,"div",9),t.YNc(73,Ct,1,3,"locale-date-picker",11),t.YNc(74,At,1,3,"locale-date-picker",11),t.qZA(),t.TgZ(75,"div",9),t._UZ(76,"form-input",19),t.qZA()(),t.TgZ(77,"div",14)(78,"div",9),t._UZ(79,"form-input",19),t.qZA(),t.YNc(80,_t,2,3,"div",22),t.qZA()()()()(),t.TgZ(81,"mat-step",4),t.ALo(82,"translate"),t.TgZ(83,"form",5)(84,"div",6)(85,"h4",7),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"div",8)(89,"div",9)(90,"form-input",23),t.NdJ("valueChanges",function(){return e.onAnnualFeesValueChange()}),t.qZA()(),t.YNc(91,mt,2,5,"div",22),t.TgZ(92,"div",24)(93,"form-input",25),t.NdJ("valueChanges",function(r){return e.onServicesChange(r)}),t.ALo(94,"translate"),t.qZA()(),t.YNc(95,Et,37,66,"ng-container",26),t.TgZ(96,"h5",27),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.TgZ(99,"h6",28),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.TgZ(102,"div",29),t._UZ(103,"form-input",30),t.ALo(104,"translate"),t.ALo(105,"translate"),t.ALo(106,"translate"),t.ALo(107,"translate"),t.ALo(108,"translate"),t.qZA(),t.TgZ(109,"div",9),t._UZ(110,"form-input",31),t.qZA(),t.TgZ(111,"div",9),t._UZ(112,"form-input",32),t.qZA(),t.TgZ(113,"div",9),t._UZ(114,"form-input",19),t.YNc(115,Lt,5,3,"div",33),t.qZA()()()()(),t.TgZ(116,"mat-step",4),t.ALo(117,"translate"),t.TgZ(118,"div",6)(119,"form",5)(120,"h4",7),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"div",8)(124,"div",34)(125,"div",35)(126,"div",36)(127,"span"),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.TgZ(130,"span"),t._uU(131),t.ALo(132,"date"),t.qZA()(),t.TgZ(133,"div",36)(134,"span"),t._uU(135),t.ALo(136,"translate"),t.qZA(),t.TgZ(137,"span"),t._uU(138),t.ALo(139,"date"),t.qZA()(),t.TgZ(140,"div",36)(141,"span"),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"span"),t._uU(145),t.qZA()()(),t.TgZ(146,"div",35)(147,"div",36)(148,"span"),t._uU(149),t.ALo(150,"translate"),t.qZA(),t.TgZ(151,"span"),t._uU(152),t.qZA()(),t.TgZ(153,"div",36)(154,"span"),t._uU(155),t.ALo(156,"translate"),t.qZA(),t.TgZ(157,"span"),t._uU(158),t.qZA()(),t.TgZ(159,"div",36)(160,"span"),t._uU(161),t.ALo(162,"translate"),t.qZA(),t.TgZ(163,"span"),t._uU(164),t.qZA()()()(),t.YNc(165,yt,17,14,"div",37),t.qZA()()()()(),t.TgZ(166,"div",38)(167,"div")(168,"button",39),t.NdJ("click",function(){return e.handleCancel()}),t._uU(169),t.ALo(170,"translate"),t.qZA(),t.YNc(171,St,3,3,"button",40),t.YNc(172,xt,3,3,"button",41),t.TgZ(173,"button",42),t._uU(174),t.ALo(175,"translate"),t.qZA()()()()()()),2&n){let l,r,s,d;t.xp6(2),t.Q6J("formGroup",e.addEditContract),t.xp6(1),t.Q6J("orientation",t.lcZ(4,123,e.stepperOrientation))("selectedIndex",e.selectedIndex),t.xp6(2),t.Q6J("label",t.lcZ(6,125,"CONTRACTS.CONTRACT_DURATION"))("stepControl",e.formGroup("contractDuration")),t.xp6(2),t.Q6J("formGroup",e.formGroup("contractDuration")),t.xp6(3),t.Oqu(t.lcZ(11,127,"CONTRACTS.ADD_CONTRACT_DURATION")),t.xp6(4),t.Q6J("ngIf",e.currentLang===e.Lang.arabic),t.xp6(1),t.Q6J("ngIf",e.currentLang!==e.Lang.arabic),t.xp6(1),t.Q6J("ngIf",e.calculatedContractDuration),t.xp6(2),t.Q6J("singleFile",!0)("formGroup",e.addEditContract)("formControl",e.formControl("contractDuration","attachment"))("editMode",!1)("allowedTypes",e.allowedTypes),t.xp6(1),t.Q6J("label",t.lcZ(20,129,"CONTRACTS.PROPERTY_AND_UNITS"))("stepControl",e.formGroup("propertyUnitDetails")),t.xp6(2),t.Q6J("formGroup",e.formGroup("propertyUnitDetails")),t.xp6(3),t.Oqu(t.lcZ(25,131,"CONTRACTS.PROPERTY_AND_UNITS")),t.xp6(5),t.Q6J("label",t.lcZ(30,133,"PROPERTY.PROPERTY_USAGE"))("type",e.InputTypes.SELECT)("selectOptions",t.VKq(203,Y,t.lcZ(31,135,e.propertyUsageTypes$)))("FormControl",e.formControl("propertyUnitDetails","realEstateUseId")),t.xp6(4),t.Q6J("label",t.lcZ(34,137,"PROPERTY.PROPERTY_TYPE"))("type",e.InputTypes.SELECT)("selectOptions",t.VKq(205,Y,t.lcZ(35,139,e.propertyTypes$)))("FormControl",e.formControl("propertyUnitDetails","realEstateTypeId")),t.xp6(5),t.Q6J("label",t.lcZ(39,141,"CONTRACTS.CHOOSE_THE_PROPERTY"))("type",e.InputTypes.SELECT)("selectOptions",t.VKq(207,Y,t.lcZ(40,143,e.realEstateOptions$)))("FormControl",e.formControl("propertyUnitDetails","realEstateId")),t.xp6(4),t.Q6J("label",t.lcZ(43,145,"CONTRACTS.CHOOSE_THE_UNIT"))("type",e.InputTypes.SELECT)("selectOptions",t.VKq(209,Rt,t.lcZ(44,147,e.propertiesOptions$)))("FormControl",e.formControl("propertyUnitDetails","propertyId")),t.xp6(3),t.Q6J("label",t.lcZ(46,149,"CONTRACTS.CONTRACT_PARTIES"))("stepControl",e.formGroup("contractParties")),t.xp6(2),t.Q6J("formGroup",e.formGroup("contractParties")),t.xp6(3),t.Oqu(t.lcZ(51,151,"CONTRACTS.CONTRACT_PARTIES")),t.xp6(4),t.hij("",t.lcZ(55,153,"LABELS.OWNER"),": "),t.xp6(4),t.Q6J("label","LABELS.FORM.FULL_NAME")("type",e.InputTypes.TEXT)("isReadonly",!0)("FormControl",e.formControl("contractParties","name")),t.xp6(2),t.Q6J("label","PROPERTY.NATIONAL_ID")("type",e.InputTypes.TEXT)("FormControl",e.formControl("contractParties","nationalId"))("isReadonly",!0),t.xp6(2),t.hij("",t.lcZ(63,155,"CONTRACTS.TENANT"),": "),t.xp6(4),t.Q6J("label","CONTRACTS.TENANT_NAME")("type",e.InputTypes.TEXT)("FormControl",e.formControl("contractParties","tenantName")),t.xp6(2),t.Q6J("label","PROPERTY.NATIONAL_ID")("type",e.InputTypes.TEL)("FormControl",e.formControl("contractParties","tenantNationalId")),t.xp6(2),t.Q6J("singleFile",!0)("formGroup",e.addEditContract)("formControl",e.formControl("contractParties","idPhoto"))("editMode",!1)("allowedTypes",e.allowedTypes),t.xp6(3),t.Q6J("ngIf",e.currentLang===e.Lang.arabic),t.xp6(1),t.Q6J("ngIf",e.currentLang!==e.Lang.arabic),t.xp6(2),t.Q6J("label","LABELS.FORM.TELEPHONE")("type",e.InputTypes.TEL)("FormControl",e.formControl("contractParties","tenantTelephone")),t.xp6(3),t.Q6J("label","LABELS.FORM.EMAIL")("type",e.InputTypes.EMAIL)("FormControl",e.formControl("contractParties","email")),t.xp6(1),t.Q6J("ngIf",e.isCommercialContract),t.xp6(1),t.Q6J("label",t.lcZ(82,157,"CONTRACTS.FINANCIAL_DATA"))("stepControl",e.formGroup("financialDetails")),t.xp6(2),t.Q6J("formGroup",e.formGroup("financialDetails")),t.xp6(3),t.Oqu(t.lcZ(87,159,"CONTRACTS.FINANCIAL_DATA")),t.xp6(4),t.Q6J("label","CONTRACTS.ANNUAL_FEES_FOR_RENTAL")("iconClass",!0)("type",e.InputTypes.NUMBER)("FormControl",e.formControl("financialDetails","annualRentalFees")),t.xp6(1),t.Q6J("ngIf",e.isCommercialContract),t.xp6(2),t.Q6J("label",t.lcZ(94,161,"PROPERTY.SERVICES"))("type",e.InputTypes.TOGGLE)("FormControl",e.formControl("financialDetails","services")),t.xp6(2),t.Q6J("ngIf",e.formControl("financialDetails","services").value),t.xp6(2),t.hij("",t.lcZ(98,163,"CONTRACTS.PAYMENTS")," "),t.xp6(3),t.hij("",t.lcZ(101,165,"CONTRACTS.REPEATED_PAYMENTS"),": "),t.xp6(3),t.Q6J("label",t.lcZ(104,167,"CONTRACTS.PAYMENTS"))("type",e.InputTypes.RADIO)("radioOptions",t.l5B(223,It,t.WLB(211,qt,e.PaymentWay.Monthly,t.lcZ(105,169,"CONTRACTS.MONTHLY")),t.WLB(214,J,e.PaymentWay.Quarterly,t.lcZ(106,171,"CONTRACTS.PER_QUARTER")),t.WLB(217,J,e.PaymentWay.SemiAnnual,t.lcZ(107,173,"CONTRACTS.HAIF_YEAR")),t.WLB(220,J,e.PaymentWay.Yearly,t.lcZ(108,175,"CONTRACTS.YEARLY"))))("FormControl",e.formControl("financialDetails","paymentWay")),t.xp6(7),t.Q6J("label","CONTRACTS.TOTAL_VALUE_OF_CONTRACT")("type",e.InputTypes.NUMBER)("FormControl",e.formControl("financialDetails","totalValue"))("isReadonly",!0)("iconClass",!0),t.xp6(2),t.Q6J("label","CONTRACTS.INSURANCE_AMOUNT")("type",e.InputTypes.NUMBER)("FormControl",e.formControl("financialDetails","insuranceAmount"))("iconClass",!0),t.xp6(2),t.Q6J("label","CONTRACTS.COMMISSION")("type",e.InputTypes.NUMBER)("FormControl",e.formControl("financialDetails","commissionAmount")),t.xp6(1),t.Q6J("ngIf",e.formControl("financialDetails","commissionAmount").touched&&e.formGroup("financialDetails").errors&&e.formGroup("financialDetails").errors.compareValuesPercentage),t.xp6(1),t.Q6J("label",t.lcZ(117,177,"CONTRACTS.CONFIRMATION"))("stepControl",e.formGroup("contractDuration")),t.xp6(3),t.Q6J("formGroup",e.formGroup("financialDetails")),t.xp6(2),t.Oqu(t.lcZ(122,179,"CONTRACTS.CONFIRMATION")),t.xp6(7),t.Oqu(t.lcZ(129,181,"LABELS.FORM.STARTING_DATE")),t.xp6(3),t.Oqu(t.xi3(132,183,null==(l=e.formControl("contractDuration","startDate"))?null:l.value,"yyyy-MM-dd")),t.xp6(4),t.Oqu(t.lcZ(136,186,"LABELS.FORM.END_DATE")),t.xp6(3),t.Oqu(t.xi3(139,188,null==(r=e.formControl("contractDuration","endDate"))?null:r.value,"yyyy-MM-dd")),t.xp6(4),t.Oqu(t.lcZ(143,191,"LABELS.OWNER_NAME")),t.xp6(3),t.hij(" ",null==(s=e.formControl("contractParties","name"))?null:s.value," "),t.xp6(4),t.Oqu(t.lcZ(150,193,"CONTRACTS.TENANT_NAME")),t.xp6(3),t.Oqu(null==(d=e.formControl("contractParties","tenantName"))?null:d.value),t.xp6(3),t.Oqu(t.lcZ(156,195,"LABELS.REAL_ESTATE_NAME")),t.xp6(3),t.hij(" ",e.realEstateName," "),t.xp6(3),t.Oqu(t.lcZ(162,197,"PROPERTY.UNIT_NUMBER")),t.xp6(3),t.hij(" ",e.unitNumber," "),t.xp6(1),t.Q6J("ngIf",e.installmentPlanTable.length>0),t.xp6(4),t.hij(" ",t.lcZ(170,199,"ACTIONS.CANCEL")," "),t.xp6(2),t.Q6J("ngIf",e.selectedIndex>0),t.xp6(1),t.Q6J("ngIf",4!==e.selectedIndex),t.xp6(1),t.Q6J("disabled",e.addEditContract.invalid),t.xp6(1),t.hij(" ",t.lcZ(175,201,"ACTIONS.SAVE")," ")}},dependencies:[C.sg,C.O5,j.C0,j.Vq,S.C,c._Y,c.JJ,c.JL,c.oH,c.sg,it.s,ct.L,st.R,C.Ov,C.uU,v.X$],styles:[".add-edit-page[_ngcontent-%COMP%]   .form-control-wrapper[_ngcontent-%COMP%]   .duration-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}.add-edit-page[_ngcontent-%COMP%]   .form-control-wrapper[_ngcontent-%COMP%]   .duration-container[_ngcontent-%COMP%]   .duration-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;margin:16px 0;background-color:#eee;padding:10px 0;border-radius:8px}.add-edit-page[_ngcontent-%COMP%]   .form-control-wrapper[_ngcontent-%COMP%]   .duration-container[_ngcontent-%COMP%]   .duration-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.add-edit-page[_ngcontent-%COMP%]   .form-control-wrapper[_ngcontent-%COMP%]   .duration-container[_ngcontent-%COMP%]   .duration-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{font-weight:700}.add-edit-page[_ngcontent-%COMP%]   .form-control-wrapper[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:-20px}.add-edit-page[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.add-edit-page[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center}.add-edit-page[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .add-edit-page[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 0}"]}),a})();var x=i(9646),R=i(2026),O=(()=>{return(a=O||(O={}))[a.Draft=1]="Draft",a[a.Active=2]="Active",a[a.AlmostExpired=3]="AlmostExpired",a[a.Expired=4]="Expired",O;var a})(),H=i(4859),L=i(8255),K=i(7633);function Ut(a,o){1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA()()),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"LABELS.OWNER_NAME")),t.xp6(3),t.Oqu(t.lcZ(6,9,"LABELS.REAL_ESTATE_NAME")),t.xp6(3),t.Oqu(t.lcZ(9,11,"CONTRACTS.TENANT_NAME")),t.xp6(3),t.Oqu(t.lcZ(12,13,"PROPERTY.UNIT_NUMBER")),t.xp6(3),t.Oqu(t.lcZ(15,15,"LABELS.CODE")),t.xp6(3),t.Oqu(t.lcZ(18,17,"CONTRACTS.CONTRACT_STATUS")),t.xp6(3),t.Oqu(t.lcZ(21,19,"ACTIONS.ACTIONS")))}function bt(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(n);const l=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.handleContractStatus(null==l?null:l.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ACTIONS.ACTIVATE_CONTRACT")))}const Ft=function(a){return["/contracts/commercial/details",a]},X=function(){return{isCommercial:!0}};function Pt(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",11)(14,"button",12),t._UZ(15,"i",13),t.qZA(),t.TgZ(16,"mat-menu",11,14)(18,"button",15),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.YNc(21,bt,3,3,"button",16),t.TgZ(22,"button",17),t.NdJ("click",function(){const r=t.CHM(n).$implicit,s=t.oxw(2);return t.KtG(s.handleRemoveContract(r.id))}),t._uU(23),t.ALo(24,"translate"),t.qZA()()()()}if(2&a){const n=o.$implicit,e=t.MAs(17);t.xp6(2),t.hij(" ",null==n?null:n.owner," "),t.xp6(2),t.hij(" ",null==n?null:n.realEstateName," "),t.xp6(2),t.hij(" ",null==n?null:n.tenant," "),t.xp6(2),t.hij(" ",null==n?null:n.propertyNumber," "),t.xp6(2),t.hij(" ",null==n?null:n.code," "),t.xp6(2),t.hij(" ",null==n?null:n.contractStatus," "),t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(4),t.Q6J("routerLink",t.VKq(16,Ft,null==n?null:n.id))("queryParams",t.DdM(18,X)),t.xp6(1),t.Oqu(t.lcZ(20,12,"LABELS.VIEW_DETAILS")),t.xp6(2),t.Q6J("ngIf","Draft"===(null==n?null:n.contractStatus)),t.xp6(2),t.Oqu(t.lcZ(24,14,"ACTIONS.DELETE"))}}function Mt(a,o){}function wt(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"data-table",7),t.NdJ("pageChange",function(l){t.CHM(n);const r=t.oxw();return t.KtG(r.onPageChange(l))}),t.ALo(1,"async"),t.YNc(2,Ut,22,21,"ng-template",null,8,t.W1O),t.YNc(4,Pt,25,19,"ng-template",null,9,t.W1O),t.YNc(6,Mt,0,0,"ng-template",null,10,t.W1O),t.qZA()}if(2&a){const n=t.oxw();t.Q6J("dataSource",t.lcZ(1,1,n.propertyTable$))}}const Yt=function(){return["/contracts/commercial/add-contract"]},Jt=function(){return{isCommercialContract:!0}};let Bt=(()=>{class a{constructor(n,e,l){this.translationService=n,this.contractsLogicService=e,this.dialog=l,this.propertyTable$=(0,x.of)({data:[],length:0,pageSize:0,pageIndex:0,emptyState:"No Data Found!"}),this.contractPagingPayload={pagedSearch:{pageIndex:1,pageSize:8},contractType:h.Commercial}}get InputTypes(){return I.o}ngOnInit(){this.searchContracts(),this.translationService.currentLanguage$.subscribe(n=>{this.currentLang=n})}onPageChange(n){this.contractPagingPayload.pagedSearch.pageIndex=n.pageIndex+1,this.searchContracts()}handleRemoveContract(n){return this.dialog.open(R.$,{maxWidth:"550px",minWidth:"500px",data:{title:"ACTIONS.DELETE_CONTRACT",message:"LABELS.FORM.ARE_YOU_SURE",actionLabel:"ACTIONS.DELETE"}}).afterClosed().subscribe(r=>{if(!r)return r;this.contractsLogicService.deleteContract(n).subscribe(s=>{this.searchContracts()})})}searchContracts(){this.contractsLogicService.searchContracts(this.contractPagingPayload).subscribe(n=>{this.propertyTable$=(0,x.of)({data:n?.items,length:n.totalcount,pageSize:n.paginationCount,pageIndex:1,emptyState:"LABELS.NO_DATA"})})}handleContractStatus(n){const l=this.dialog.open(R.$,{maxWidth:"550px",minWidth:"500px",data:{title:"ACTIONS.ACTIVATE_CONTRACT",message:"LABELS.FORM.ARE_YOU_SURE",actionLabel:"ACTIONS.CONFIRM",iconClass:"fa fa-light fa-triangle-exclamation"}}),r={id:n,contractStatus:O.Active};return l.afterClosed().subscribe(s=>{if(!s)return s;this.contractsLogicService.updateContractStatus(r).subscribe(d=>{this.searchContracts()})})}get Lang(){return U.U}get ContractStatus(){return O}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(b.D),t.Y36(y),t.Y36(F.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["commercial-contracts-listing"]],decls:12,vars:13,consts:[[1,"page-container","contracts-listing"],[1,"page-header"],[1,"btn-wrapper"],[1,"ac-btn","btn-fill",3,"routerLink","state","queryParams"],[1,"page-content"],[1,"table-wrapper"],["class","preview__table",3,"dataSource","pageChange",4,"ngIf"],[1,"preview__table",3,"dataSource","pageChange"],["tableHead",""],["tableRows",""],["loaderRef",""],["RtlDir",""],["mat-button","",3,"matMenuTriggerFor"],[1,"fa-solid","fa-ellipsis"],["menu","matMenu"],["mat-menu-item","","RtlDir","",3,"routerLink","queryParams"],["mat-menu-item","","RtlDir","",3,"click",4,"ngIf"],["mat-menu-item","","RtlDir","",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",2)(6,"button",3),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t.TgZ(9,"div",4)(10,"section",5),t.YNc(11,wt,8,3,"data-table",6),t.qZA()()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,6,"LABELS.COMMERCIAL_CONTRACTS")),t.xp6(3),t.Q6J("routerLink",t.DdM(10,Yt))("state",t.DdM(11,Jt))("queryParams",t.DdM(12,X)),t.xp6(1),t.hij(" ",t.lcZ(8,8,"CONTRACTS.ADD_NEW_CONTRACT")," "),t.xp6(4),t.Q6J("ngIf",e.propertyTable$))},dependencies:[C.O5,H.lW,L.VK,L.OP,L.p6,S.C,K.Q,Z.rH,C.Ov,v.X$],styles:[".table-wrapper[_ngcontent-%COMP%]{min-height:200px}"]}),a})();var Qt=i(6118);function Vt(a,o){if(1&a&&(t.TgZ(0,"div",16)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",17)(5,"div")(6,"span"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span"),t._uU(10),t.qZA()(),t.TgZ(11,"div")(12,"span"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA()(),t.TgZ(17,"div")(18,"span"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"span"),t._uU(22),t.qZA()()()()),2&a){const n=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,7,"LABELS.RENTAL_PERIOD_AD")," : "),t.xp6(5),t.hij(" ",t.lcZ(8,9,"LABELS.YEARS")," "),t.xp6(3),t.hij(" ",n.calculatedContractDuration.years," "),t.xp6(3),t.hij(" ",t.lcZ(14,11,"LABELS.MONTHS")," "),t.xp6(3),t.hij(" ",n.calculatedContractDuration.months," "),t.xp6(3),t.hij(" ",t.lcZ(20,13,"LABELS.DAYS")," "),t.xp6(3),t.hij(" ",n.calculatedContractDuration.days," ")}}function kt(a,o){if(1&a&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&a){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"LABELS.FORM.EMAIL")),t.xp6(3),t.Oqu(null==n.contractDetails||null==n.contractDetails.tenant?null:n.contractDetails.tenant.email)}}function Gt(a,o){if(1&a&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&a){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"LABELS.VAT")),t.xp6(3),t.Oqu(null==n.contractDetails||null==n.contractDetails.tenant?null:n.contractDetails.tenant.vat)}}function jt(a,o){if(1&a&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&a){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"LABELS.TOTAL_AMOUNT_OF_TAX")),t.xp6(3),t.AsE("",null==n.contractDetails?null:n.contractDetails.totalTaxesAmount," ",t.lcZ(6,5,"LABELS.SAR"),"")}}function Wt(a,o){if(1&a&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&a){const n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"CONTRACTS.ELECTRICITY_FIXED_FEES")),t.xp6(3),t.AsE("",null==n.contractDetails?null:n.contractDetails.electricityFixedFees," ",t.lcZ(6,5,"LABELS.SAR"),"")}}function $t(a,o){if(1&a&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&a){const n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"CONTRACTS.ELECTRICITY_CONSUMPTION")),t.xp6(3),t.Oqu(null==n.contractDetails?null:n.contractDetails.electricityConsumption)}}function Ht(a,o){if(1&a&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&a){const n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"CONTRACTS.GAS_FIXED_FEES")),t.xp6(3),t.AsE("",null==n.contractDetails?null:n.contractDetails.gasFixedFees," ",t.lcZ(6,5,"LABELS.SAR"),"")}}function Kt(a,o){if(1&a&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&a){const n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"CONTRACTS.GAS_CONSUMPTION")),t.xp6(3),t.Oqu(null==n.contractDetails?null:n.contractDetails.gasConsumption)}}function Xt(a,o){if(1&a&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&a){const n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"CONTRACTS.WATER_FIXED_FEES")),t.xp6(3),t.AsE("",null==n.contractDetails?null:n.contractDetails.waterFixedFees," ",t.lcZ(6,5,"LABELS.SAR"),"")}}function zt(a,o){if(1&a&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&a){const n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"CONTRACTS.WATER_CONSUMPTION")),t.xp6(3),t.Oqu(null==n.contractDetails?null:n.contractDetails.waterConsumption)}}function tn(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"h6",12),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"h6",12),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",8),t.YNc(8,Wt,7,7,"div",13),t.YNc(9,$t,6,4,"div",13),t._UZ(10,"div",9),t.qZA(),t.TgZ(11,"h6",12),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",8),t.YNc(15,Ht,7,7,"div",13),t.YNc(16,Kt,6,4,"div",13),t._UZ(17,"div",9),t.qZA(),t.TgZ(18,"h6",12),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",8),t.YNc(22,Xt,7,7,"div",13),t.YNc(23,zt,6,4,"div",13),t._UZ(24,"div",9),t.qZA(),t.BQk()),2&a){const n=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,10,"PROPERTY.SERVICES"),":"),t.xp6(3),t.hij("",t.lcZ(6,12,"CONTRACTS.ELECTRICITY_FEES"),":"),t.xp6(3),t.Q6J("ngIf",null==n.contractDetails?null:n.contractDetails.electricityFixedFees),t.xp6(1),t.Q6J("ngIf",null==n.contractDetails?null:n.contractDetails.electricityConsumption),t.xp6(3),t.hij("",t.lcZ(13,14,"CONTRACTS.GAS_FEES"),":"),t.xp6(3),t.Q6J("ngIf",null==n.contractDetails?null:n.contractDetails.gasFixedFees),t.xp6(1),t.Q6J("ngIf",null==n.contractDetails?null:n.contractDetails.gasConsumption),t.xp6(3),t.hij("",t.lcZ(20,16,"CONTRACTS.WATER_FEES"),":"),t.xp6(3),t.Q6J("ngIf",null==n.contractDetails?null:n.contractDetails.waterFixedFees),t.xp6(1),t.Q6J("ngIf",null==n.contractDetails?null:n.contractDetails.waterConsumption)}}function nn(a,o){1&a&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"CONTRACTS.TAX_VALUE")))}function en(a,o){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a){const n=t.oxw().$implicit;t.xp6(1),t.AsE("",+(null==n.TaxesAmount?null:n.TaxesAmount.toFixed(2))," ",t.lcZ(2,2,"LABELS.SAR")," ")}}function an(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,en,3,4,"td",14),t.qZA()),2&a){const n=o.$implicit,e=t.oxw(2);t.xp6(2),t.Oqu(t.xi3(3,5,n.issuingDate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(t.xi3(6,8,n.dueDate,"yyyy-MM-dd")),t.xp6(3),t.AsE("",+(null==n.totalInvoiceValue?null:n.totalInvoiceValue.toFixed(2))," ",t.lcZ(9,11,"LABELS.SAR")," "),t.xp6(2),t.Q6J("ngIf",e.isCommercialContract)}}function on(a,o){if(1&a&&(t.TgZ(0,"div",18)(1,"h6",19),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"table")(5,"tr")(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.YNc(15,nn,3,3,"th",14),t.qZA(),t.YNc(16,an,11,13,"tr",20),t.qZA()()),2&a){const n=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,6,"CONTRACTS.INSATLLMENTS_PAYMENT"),": "),t.xp6(5),t.hij(" ",t.lcZ(8,8,"PROPERTY.ISSUING_DATE")," "),t.xp6(3),t.hij(" ",t.lcZ(11,10,"CONTRACTS.DUE_DATE")," "),t.xp6(3),t.Oqu(t.lcZ(14,12,"CONTRACTS.INVOICE_VALUE")),t.xp6(2),t.Q6J("ngIf",n.isCommercialContract),t.xp6(1),t.Q6J("ngForOf",n.installmentPlanTable)}}let z=(()=>{class a{constructor(n,e){this.activatedRoute=n,this.contractsLogicService=e,this.installmentPlanTable=[],this.isCommercialContract=!1,this.activatedRoute.queryParams.subscribe(l=>{this.isCommercialContract=l.isCommercial})}ngOnInit(){this.activatedRoute.params.subscribe(n=>{this.contractId=n.id,this.getContractDetails()})}getContractDetails(){this.contractsLogicService.getContractDetails(this.contractId).subscribe(n=>{n&&(this.contractDetails=n,this.calculatedContractDuration=k(new Date(n.startDate),new Date(n.endDate)),this.generatePaymentWay(n.paymentWay),this.installmentPlanTable=G(new Date(n.startDate),n.annualRentalFees,n.gasFixedFees+n.electricityFixedFees+n.waterFixedFees,n.paymentWay,this.calculatedContractDuration.monthDifference,n.totalTaxesAmount))})}generatePaymentWay(n){switch(n){case m.Monthly:this.installmentPlan="CONTRACTS.MONTHLY";break;case m.Quarterly:this.installmentPlan="CONTRACTS.PER_QUARTER";break;case m.SemiAnnual:this.installmentPlan="CONTRACTS.HAIF_YEAR";break;case m.Yearly:this.installmentPlan="CONTRACTS.YEARLY"}}checkServicesVisibility(){return this.contractDetails?.electricityConsumption||this.contractDetails?.electricityFixedFees||this.contractDetails?.gasFixedFees||this.contractDetails?.gasConsumption||this.contractDetails?.waterFixedFees||this.contractDetails?.waterConsumption}get Url(){return Qt.R}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(Z.gz),t.Y36(y))},a.\u0275cmp=t.Xpm({type:a,selectors:[["contract-details"]],decls:202,vars:152,consts:[["RtlDir","",1,"page-container","details-page"],[1,"page-content"],[1,"content-section"],[1,"download-wrapper"],[1,"tab-headline"],["download","","target","_blank","download","",1,"btn-fill",3,"href"],[1,"mx-2","fa","fa-light","fa-download"],[1,"details-container"],[1,"details-row"],[1,"details-col"],["class","duration-container",4,"ngIf"],[1,"content-section","mt-3"],[1,"mb-4"],["class","details-col",4,"ngIf"],[4,"ngIf"],["class","details-container mt-3",4,"ngIf"],[1,"duration-container"],[1,"duration-wrapper"],[1,"details-container","mt-3"],[1,"mb-3"],[4,"ngFor","ngForOf"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"a",5),t._UZ(8,"i",6),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"div",7)(12,"div",8)(13,"div",9)(14,"span"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"span"),t._uU(18),t.ALo(19,"date"),t.qZA()(),t.TgZ(20,"div",9)(21,"span"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"span"),t._uU(25),t.ALo(26,"date"),t.qZA()(),t._UZ(27,"div",9),t.qZA(),t.YNc(28,Vt,23,15,"div",10),t.qZA()(),t.TgZ(29,"div",11)(30,"h4",4),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",7)(34,"div",8)(35,"div",9)(36,"span"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"span"),t._uU(40),t.qZA()(),t.TgZ(41,"div",9)(42,"span"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"span"),t._uU(46),t.qZA()(),t.TgZ(47,"div",9)(48,"span"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"span"),t._uU(52),t.qZA()()(),t.TgZ(53,"div",8)(54,"div",9)(55,"span"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"span"),t._uU(59),t.qZA()()()()(),t.TgZ(60,"div",11)(61,"h4",4),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"div",7)(65,"h6",12),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"div",8)(69,"div",9)(70,"span"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t._uU(73),t.qZA(),t.TgZ(74,"div",9)(75,"span"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t._uU(78),t.qZA(),t._UZ(79,"div",9),t.qZA(),t.TgZ(80,"h6",12),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"div",8)(84,"div",9)(85,"span"),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"span"),t._uU(89),t.qZA()(),t.TgZ(90,"div",9)(91,"span"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.TgZ(94,"span"),t._uU(95),t.qZA()(),t.TgZ(96,"div",9)(97,"span"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"span"),t._uU(101),t.ALo(102,"date"),t.qZA()()(),t.TgZ(103,"div",8)(104,"div",9)(105,"span"),t._uU(106),t.ALo(107,"translate"),t.qZA(),t.TgZ(108,"span"),t._uU(109),t.qZA()(),t.YNc(110,kt,6,4,"div",13),t.YNc(111,Gt,6,4,"div",13),t.qZA()()(),t.TgZ(112,"div",11)(113,"h4",4),t._uU(114),t.ALo(115,"translate"),t.qZA(),t.TgZ(116,"div",7)(117,"div",8)(118,"div",9)(119,"span"),t._uU(120),t.ALo(121,"translate"),t.qZA(),t.TgZ(122,"span"),t._uU(123),t.ALo(124,"translate"),t.qZA()(),t.YNc(125,jt,7,7,"div",13),t.qZA(),t.YNc(126,tn,25,18,"ng-container",14),t.TgZ(127,"div",8)(128,"div",9)(129,"span"),t._uU(130),t.ALo(131,"translate"),t.qZA(),t.TgZ(132,"span"),t._uU(133),t.ALo(134,"translate"),t.qZA()()(),t.TgZ(135,"div",8)(136,"div",9)(137,"span"),t._uU(138),t.ALo(139,"translate"),t.qZA(),t.TgZ(140,"span"),t._uU(141),t.ALo(142,"translate"),t.qZA()(),t.TgZ(143,"div",9)(144,"span"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t.TgZ(147,"span"),t._uU(148),t.ALo(149,"translate"),t.qZA()(),t.TgZ(150,"div",9)(151,"span"),t._uU(152),t.ALo(153,"translate"),t.qZA(),t.TgZ(154,"span"),t._uU(155),t.ALo(156,"translate"),t.qZA()()()()(),t.TgZ(157,"div",11)(158,"h4",4),t._uU(159),t.ALo(160,"translate"),t.qZA(),t.TgZ(161,"div",7)(162,"div",8)(163,"div",9)(164,"span"),t._uU(165),t.ALo(166,"translate"),t.qZA(),t.TgZ(167,"span"),t._uU(168),t.ALo(169,"date"),t.qZA()(),t.TgZ(170,"div",9)(171,"span"),t._uU(172),t.ALo(173,"translate"),t.qZA(),t.TgZ(174,"span"),t._uU(175),t.ALo(176,"date"),t.qZA()(),t.TgZ(177,"div",9)(178,"span"),t._uU(179),t.ALo(180,"translate"),t.qZA(),t._uU(181),t.qZA()(),t.TgZ(182,"div",8)(183,"div",9)(184,"span"),t._uU(185),t.ALo(186,"translate"),t.qZA(),t.TgZ(187,"span"),t._uU(188),t.qZA()(),t.TgZ(189,"div",9)(190,"span"),t._uU(191),t.ALo(192,"translate"),t.qZA(),t.TgZ(193,"span"),t._uU(194),t.qZA()(),t.TgZ(195,"div",9)(196,"span"),t._uU(197),t.ALo(198,"translate"),t.qZA(),t.TgZ(199,"span"),t._uU(200),t.qZA()()(),t.YNc(201,on,17,14,"div",15),t.qZA()()()()),2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,65,"CONTRACTS.CONTRACT_DURATION")),t.xp6(2),t.Q6J("href",e.Url.dev+"api/Contract/GenerateContractFile/"+e.contractId,t.LSH),t.xp6(2),t.hij(" ",t.lcZ(10,67,"ACTIONS.DOWNLOAD_CONTRACT")," "),t.xp6(6),t.Oqu(t.lcZ(16,69,"LABELS.FORM.STARTING_DATE")),t.xp6(3),t.Oqu(t.xi3(19,71,null==e.contractDetails?null:e.contractDetails.startDate,"yyyy-MM-dd")),t.xp6(4),t.Oqu(t.lcZ(23,74,"LABELS.FORM.END_DATE")),t.xp6(3),t.Oqu(t.xi3(26,76,null==e.contractDetails?null:e.contractDetails.endDate,"yyyy-MM-dd")),t.xp6(3),t.Q6J("ngIf",e.calculatedContractDuration),t.xp6(3),t.Oqu(t.lcZ(32,79,"CONTRACTS.PROPERTY_AND_UNITS")),t.xp6(6),t.Oqu(t.lcZ(38,81,"PROPERTY.PROPERTY_USAGE")),t.xp6(3),t.Oqu(null==e.contractDetails||null==e.contractDetails.property||null==e.contractDetails.property.propertyUse?null:e.contractDetails.property.propertyUse.nameAr),t.xp6(3),t.Oqu(t.lcZ(44,83,"PROPERTY.PROPERTY_TYPE")),t.xp6(3),t.Oqu(null==e.contractDetails||null==e.contractDetails.property||null==e.contractDetails.property.propertyType?null:e.contractDetails.property.propertyType.nameAr),t.xp6(3),t.Oqu(t.lcZ(50,85,"CONTRACTS.CHOOSE_THE_PROPERTY")),t.xp6(3),t.Oqu(null==e.contractDetails||null==e.contractDetails.property?null:e.contractDetails.property.propertyNumber),t.xp6(4),t.Oqu(t.lcZ(57,87,"CONTRACTS.CHOOSE_THE_UNIT")),t.xp6(3),t.Oqu(null==e.contractDetails||null==e.contractDetails.property||null==e.contractDetails.property.realEstate?null:e.contractDetails.property.realEstate.realEstateNumber),t.xp6(3),t.Oqu(t.lcZ(63,89,"CONTRACTS.CONTRACT_PARTIES")),t.xp6(4),t.hij("",t.lcZ(67,91,"LABELS.OWNER"),":"),t.xp6(5),t.Oqu(t.lcZ(72,93,"LABELS.FORM.FULL_NAME")),t.xp6(2),t.hij(" ",null==e.contractDetails||null==e.contractDetails.property||null==e.contractDetails.property.realEstate||null==e.contractDetails.property.realEstate.realEstateOwner?null:e.contractDetails.property.realEstate.realEstateOwner.name," "),t.xp6(3),t.Oqu(t.lcZ(77,95,"PROPERTY.NATIONAL_ID")),t.xp6(2),t.hij(" ",null==e.contractDetails||null==e.contractDetails.property||null==e.contractDetails.property.realEstate||null==e.contractDetails.property.realEstate.realEstateOwner?null:e.contractDetails.property.realEstate.realEstateOwner.ownerNationalId," "),t.xp6(3),t.hij("",t.lcZ(82,97,"CONTRACTS.TENANT"),":"),t.xp6(5),t.Oqu(t.lcZ(87,99,"CONTRACTS.TENANT_NAME")),t.xp6(3),t.Oqu(null==e.contractDetails||null==e.contractDetails.tenant?null:e.contractDetails.tenant.name),t.xp6(3),t.Oqu(t.lcZ(93,101,"PROPERTY.NATIONAL_ID")),t.xp6(3),t.Oqu(null==e.contractDetails||null==e.contractDetails.tenant?null:e.contractDetails.tenant.tenantNationalId),t.xp6(3),t.Oqu(t.lcZ(99,103,"LABELS.FORM.DATE_OF_BIRTH")),t.xp6(3),t.Oqu(t.xi3(102,105,null==e.contractDetails||null==e.contractDetails.tenant?null:e.contractDetails.tenant.birthDay,"yyyy-MM-dd")),t.xp6(5),t.Oqu(t.lcZ(107,108,"LABELS.FORM.TELEPHONE")),t.xp6(3),t.Oqu(null==e.contractDetails||null==e.contractDetails.tenant?null:e.contractDetails.tenant.telephone),t.xp6(1),t.Q6J("ngIf",null==e.contractDetails||null==e.contractDetails.tenant?null:e.contractDetails.tenant.email),t.xp6(1),t.Q6J("ngIf",e.isCommercialContract),t.xp6(3),t.Oqu(t.lcZ(115,110,"CONTRACTS.FINANCIAL_DATA")),t.xp6(6),t.Oqu(t.lcZ(121,112,"CONTRACTS.ANNUAL_FEES_FOR_RENTAL")),t.xp6(3),t.AsE("",null==e.contractDetails?null:e.contractDetails.annualRentalFees," ",t.lcZ(124,114,"LABELS.SAR"),""),t.xp6(2),t.Q6J("ngIf",e.isCommercialContract),t.xp6(1),t.Q6J("ngIf",e.checkServicesVisibility()),t.xp6(4),t.hij("",t.lcZ(131,116,"CONTRACTS.REPEATED_PAYMENTS")," :"),t.xp6(3),t.Oqu(t.lcZ(134,118,e.installmentPlan)),t.xp6(5),t.Oqu(t.lcZ(139,120,"CONTRACTS.TOTAL_VALUE_OF_CONTRACT")),t.xp6(3),t.AsE("",null==e.contractDetails?null:e.contractDetails.totalValue," ",t.lcZ(142,122,"LABELS.SAR"),""),t.xp6(4),t.Oqu(t.lcZ(146,124,"CONTRACTS.INSURANCE_AMOUNT")),t.xp6(3),t.AsE("",null==e.contractDetails?null:e.contractDetails.insuranceAmount," ",t.lcZ(149,126,"LABELS.SAR"),""),t.xp6(4),t.Oqu(t.lcZ(153,128,"CONTRACTS.COMMISSION")),t.xp6(3),t.AsE("",null==e.contractDetails?null:e.contractDetails.commissionAmount," ",t.lcZ(156,130,"LABELS.SAR"),""),t.xp6(4),t.Oqu(t.lcZ(160,132,"CONTRACTS.CONFIRMATION")),t.xp6(6),t.Oqu(t.lcZ(166,134,"LABELS.FORM.STARTING_DATE")),t.xp6(3),t.Oqu(t.xi3(169,136,null==e.contractDetails?null:e.contractDetails.startDate,"yyyy-MM-dd")),t.xp6(4),t.Oqu(t.lcZ(173,139,"LABELS.FORM.END_DATE")),t.xp6(3),t.Oqu(t.xi3(176,141,null==e.contractDetails?null:e.contractDetails.endDate,"yyyy-MM-dd")),t.xp6(4),t.Oqu(t.lcZ(180,144,"LABELS.OWNER_NAME")),t.xp6(2),t.hij(" ",null==e.contractDetails||null==e.contractDetails.property||null==e.contractDetails.property.realEstate||null==e.contractDetails.property.realEstate.realEstateOwner?null:e.contractDetails.property.realEstate.realEstateOwner.name," "),t.xp6(4),t.Oqu(t.lcZ(186,146,"CONTRACTS.TENANT_NAME")),t.xp6(3),t.Oqu(null==e.contractDetails||null==e.contractDetails.tenant?null:e.contractDetails.tenant.name),t.xp6(3),t.Oqu(t.lcZ(192,148,"LABELS.REAL_ESTATE_NAME")),t.xp6(3),t.hij(" ",null==e.contractDetails||null==e.contractDetails.property||null==e.contractDetails.property.realEstate?null:e.contractDetails.property.realEstate.name," "),t.xp6(3),t.Oqu(t.lcZ(198,150,"PROPERTY.UNIT_NUMBER")),t.xp6(3),t.hij(" ",null==e.contractDetails||null==e.contractDetails.property?null:e.contractDetails.property.propertyNumber," "),t.xp6(1),t.Q6J("ngIf",e.installmentPlanTable.length>0))},dependencies:[C.sg,C.O5,S.C,C.uU,v.X$],styles:[".page-container[_ngcontent-%COMP%]   .download-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.page-container[_ngcontent-%COMP%]   .download-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin-bottom:18px}.page-container[_ngcontent-%COMP%]   .duration-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}.page-container[_ngcontent-%COMP%]   .duration-container[_ngcontent-%COMP%]   .duration-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;margin:16px 0;background-color:#eee;padding:10px 0;border-radius:8px}.page-container[_ngcontent-%COMP%]   .duration-container[_ngcontent-%COMP%]   .duration-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.page-container[_ngcontent-%COMP%]   .duration-container[_ngcontent-%COMP%]   .duration-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{font-weight:700}.page-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   .details-row[_ngcontent-%COMP%]{justify-content:unset}.page-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   .details-row[_ngcontent-%COMP%]   .details-col[_ngcontent-%COMP%]{width:33%;align-items:flex-start}.page-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   .details-row.date-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.page-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.page-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center}.page-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .details-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 0}"]}),a})();function ln(a,o){1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA()()),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"LABELS.OWNER_NAME")),t.xp6(3),t.Oqu(t.lcZ(6,9,"LABELS.REAL_ESTATE_NAME")),t.xp6(3),t.Oqu(t.lcZ(9,11,"CONTRACTS.TENANT_NAME")),t.xp6(3),t.Oqu(t.lcZ(12,13,"PROPERTY.UNIT_NUMBER")),t.xp6(3),t.Oqu(t.lcZ(15,15,"LABELS.CODE")),t.xp6(3),t.Oqu(t.lcZ(18,17,"CONTRACTS.CONTRACT_STATUS")),t.xp6(3),t.Oqu(t.lcZ(21,19,"ACTIONS.ACTIONS")))}function rn(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(n);const l=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.handleContractStatus(null==l?null:l.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ACTIONS.ACTIVATE_CONTRACT")))}const cn=function(a){return["/contracts/residential/details",a]};function sn(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",11)(14,"button",12),t._UZ(15,"i",13),t.qZA(),t.TgZ(16,"mat-menu",11,14)(18,"button",15),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.YNc(21,rn,3,3,"button",16),t.TgZ(22,"button",17),t.NdJ("click",function(){const r=t.CHM(n).$implicit,s=t.oxw(2);return t.KtG(s.handleRemoveContract(r.id))}),t._uU(23),t.ALo(24,"translate"),t.qZA()()()()}if(2&a){const n=o.$implicit,e=t.MAs(17);t.xp6(2),t.hij(" ",null==n?null:n.owner," "),t.xp6(2),t.hij(" ",null==n?null:n.realEstateName," "),t.xp6(2),t.hij(" ",null==n?null:n.tenant," "),t.xp6(2),t.hij(" ",null==n?null:n.propertyNumber," "),t.xp6(2),t.hij(" ",null==n?null:n.code," "),t.xp6(2),t.hij(" ",null==n?null:n.contractStatus," "),t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(4),t.Q6J("routerLink",t.VKq(15,cn,null==n?null:n.id)),t.xp6(1),t.Oqu(t.lcZ(20,11,"LABELS.VIEW_DETAILS")),t.xp6(2),t.Q6J("ngIf","Draft"===(null==n?null:n.contractStatus)),t.xp6(2),t.Oqu(t.lcZ(24,13,"ACTIONS.DELETE"))}}function un(a,o){}function pn(a,o){if(1&a){const n=t.EpF();t.TgZ(0,"data-table",7),t.NdJ("pageChange",function(l){t.CHM(n);const r=t.oxw();return t.KtG(r.onPageChange(l))}),t.ALo(1,"async"),t.YNc(2,ln,22,21,"ng-template",null,8,t.W1O),t.YNc(4,sn,25,17,"ng-template",null,9,t.W1O),t.YNc(6,un,0,0,"ng-template",null,10,t.W1O),t.qZA()}if(2&a){const n=t.oxw();t.Q6J("dataSource",t.lcZ(1,1,n.propertyTable$))}}const dn=function(){return["/contracts/residential/add-contract"]},Cn=[{title:"Residential Contracts",path:"residential",children:[{title:"Residential Contracts Listing",path:"",component:(()=>{class a{constructor(n,e,l){this.translationService=n,this.contractsLogicService=e,this.dialog=l,this.propertyTable$=(0,x.of)({data:[],length:0,pageSize:0,pageIndex:0,emptyState:"No Data Found!"}),this.contractPagingPayload={pagedSearch:{pageIndex:1,pageSize:8},contractType:h.Residential}}get InputTypes(){return I.o}ngOnInit(){this.searchContracts(),this.translationService.currentLanguage$.subscribe(n=>{this.currentLang=n})}onPageChange(n){this.contractPagingPayload.pagedSearch.pageIndex=n.pageIndex+1,this.searchContracts()}handleRemoveContract(n){return this.dialog.open(R.$,{maxWidth:"550px",minWidth:"500px",data:{title:"ACTIONS.DELETE_CONTRACT",message:"LABELS.FORM.ARE_YOU_SURE",actionLabel:"ACTIONS.DELETE"}}).afterClosed().subscribe(r=>{if(!r)return r;this.contractsLogicService.deleteContract(n).subscribe(s=>{this.searchContracts()})})}searchContracts(){this.contractsLogicService.searchContracts(this.contractPagingPayload).subscribe(n=>{this.propertyTable$=(0,x.of)({data:n?.items,length:n.totalcount,pageSize:n.paginationCount,pageIndex:1,emptyState:"LABELS.NO_DATA"})})}handleContractStatus(n){const l=this.dialog.open(R.$,{maxWidth:"550px",minWidth:"500px",data:{title:"ACTIONS.ACTIVATE_CONTRACT",message:"LABELS.FORM.ARE_YOU_SURE",actionLabel:"ACTIONS.CONFIRM",iconClass:"fa fa-light fa-triangle-exclamation"}}),r={id:n,contractStatus:O.Active};return l.afterClosed().subscribe(s=>{if(!s)return s;this.contractsLogicService.updateContractStatus(r).subscribe(d=>{this.searchContracts()})})}get Lang(){return U.U}get ContractStatus(){return O}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(b.D),t.Y36(y),t.Y36(F.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["contracts-listing"]],decls:12,vars:9,consts:[[1,"page-container","contracts-listing"],[1,"page-header"],[1,"btn-wrapper"],[1,"ac-btn","btn-fill",3,"routerLink"],[1,"page-content"],[1,"table-wrapper"],["class","preview__table",3,"dataSource","pageChange",4,"ngIf"],[1,"preview__table",3,"dataSource","pageChange"],["tableHead",""],["tableRows",""],["loaderRef",""],["RtlDir",""],["mat-button","",3,"matMenuTriggerFor"],[1,"fa-solid","fa-ellipsis"],["menu","matMenu"],["mat-menu-item","","RtlDir","",3,"routerLink"],["mat-menu-item","","RtlDir","",3,"click",4,"ngIf"],["mat-menu-item","","RtlDir","",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",2)(6,"button",3),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t.TgZ(9,"div",4)(10,"section",5),t.YNc(11,pn,8,3,"data-table",6),t.qZA()()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,4,"LABELS.RESIDENTIAL_CONTRACTS")),t.xp6(3),t.Q6J("routerLink",t.DdM(8,dn)),t.xp6(1),t.hij(" ",t.lcZ(8,6,"CONTRACTS.ADD_NEW_CONTRACT")," "),t.xp6(4),t.Q6J("ngIf",e.propertyTable$))},dependencies:[C.O5,H.lW,L.VK,L.OP,L.p6,S.C,K.Q,Z.rH,C.Ov,v.X$],styles:[".table-wrapper[_ngcontent-%COMP%]{min-height:200px}"]}),a})()},{title:"Add Contract",path:"add-contract",component:$},{title:"Contract Details",path:"details/:id",component:z}]},{title:"Commercial Contracts",path:"commercial",children:[{title:"Commercial Contracts Listing",path:"",component:Bt},{title:"Add Contract",path:"add-contract",component:$},{title:"Contract Details",path:"details/:id",component:z}]}];let An=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[Z.Bz.forChild(Cn),Z.Bz]}),a})();var _n=i(2271);let mn=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[C.ez,v.aw,_n.m,An]}),a})()}}]);