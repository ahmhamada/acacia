"use strict";(self.webpackChunkacacia_p3=self.webpackChunkacacia_p3||[]).push([[993],{2532:(Re,C,l)=>{l.r(C),l.d(C,{PropertyModule:()=>Pe});var c=l(6895),f=l(9299),o=l(4006),A=l(8314),m=l(3151),s=l(4004),I=l(9195),P=l(7802),_=l(8522),e=l(4650),d=l(3848),x=l(8112);let L=(()=>{class n{constructor(r){this.xhrService=r}getDocumentTypes(){return this.xhrService.call({url:"api/PropertyDocumentType/Get",method:d.n.get,body:{}}).pipe((0,s.U)(r=>r))}getPropertyLookup(r){return this.xhrService.call({url:`api/${r}/Get`,method:d.n.get,body:{}}).pipe((0,s.U)(t=>t))}getCityAreas(r){return this.xhrService.call({url:`api/Area/GetCityAreas/${r}`,method:d.n.get,body:{}}).pipe((0,s.U)(t=>t))}getAreaDistricts(r){return this.xhrService.call({url:`api/District/GetAreaDistricts/${r}`,method:d.n.get,body:{}}).pipe((0,s.U)(t=>t))}uploadAttachments(r){return this.xhrService.call({url:"/api/Attachment/Upload",method:d.n.post,body:r},!0).pipe((0,s.U)(t=>t))}downloadAttachments(r){return this.xhrService.call({url:`api/Attachment/Download?fileName=${r}`,method:d.n.post,body:{}}).pipe((0,s.U)(t=>t))}createRealEstate(r){return this.xhrService.call({url:"api/RealEstate/Create",method:d.n.post,body:r}).pipe((0,s.U)(t=>t))}editRealEstate(r){return this.xhrService.call({url:"api/RealEstate/Update",method:d.n.put,body:r}).pipe((0,s.U)(t=>t))}getRealEstates(r){return this.xhrService.call({url:"api/RealEstate/Get",method:d.n.post,body:r}).pipe((0,s.U)(t=>t))}getRealEstateById(r){return this.xhrService.call({url:`/api/RealEstate/Get/${r}`,method:d.n.get,body:{}}).pipe((0,s.U)(t=>t))}deleteProperty(r){return this.xhrService.call({url:`/api/RealEstate/Delete?id=${r}`,method:d.n.delete,body:{}}).pipe((0,s.U)(t=>t))}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(x.d))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),E=(()=>{class n{constructor(r){this.propertyService=r}getDocumentTypes(){return this.propertyService.getDocumentTypes().pipe((0,s.U)(r=>r))}getPropertyLookup(r){return this.propertyService.getPropertyLookup(r).pipe((0,s.U)(t=>t))}getCityAreas(r){return this.propertyService.getCityAreas(r).pipe((0,s.U)(t=>t))}getAreaDistricts(r){return this.propertyService.getAreaDistricts(r).pipe((0,s.U)(t=>t))}uploadAttachments(r){return this.propertyService.uploadAttachments(r).pipe((0,s.U)(t=>t))}downloadAttachments(r){return this.propertyService.downloadAttachments(r).pipe((0,s.U)(t=>t))}createRealEstate(r){return this.propertyService.createRealEstate(r).pipe((0,s.U)(t=>t))}getRealEstates(r){return this.propertyService.getRealEstates(r).pipe((0,s.U)(t=>t))}editRealEstate(r){return this.propertyService.editRealEstate(r).pipe((0,s.U)(t=>t))}deleteProperty(r){return this.propertyService.deleteProperty(r).pipe((0,s.U)(t=>t))}getRealEstateById(r){return this.propertyService.getRealEstateById(r).pipe((0,s.U)(t=>({propertyDocument:{documentTypeId:t.propertyDocument.propertyDocumentTypeId,documentNumber:t.propertyDocument.documentNumber,releaseDate:t.propertyDocument.createdOn,attachment:t.propertyDocument.attachment,id:t.propertyDocument.id},owner:{name:t.name,ownerId:t.realEstateOwner.ownerNationalId,ownerBirthDay:t.realEstateOwner.ownerBirthDay,districtId:t.realEstateOwner.districtId,id:t.realEstateOwner.id,city:t.realEstateOwner.district.area.cityId,area:t.realEstateOwner.district.areaId},realEstateDetails:{name:t.name,realEstateNumber:t.realEstateNumber,numOfFloors:t.numOfFloors,numOfProperty:t.numOfProperty,address:t.address,buildingNumber:t.buildingNumber,addationalNumber:t.addationalNumber,buildDate:t.buildDate,realEstateTypeId:t.realEstateTypeId,realEstateUseId:t.realEstateUseId,id:t.id},properties:t.properties,realEstateAttachments:t.attachments})))}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(L))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var O=l(629),M=l(2289),v=l(5412),U=l(6892),Z=l(8425),y=l(8952),w=l(3496),F=l(8412),h=l(9383);const D=["fileDropRef"];function N(n,i){if(1&n){const r=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){e.CHM(r),e.oxw();const a=e.MAs(2);return e.KtG(a.click())})("fileDropped",function(a){e.CHM(r);const p=e.oxw();return e.KtG(p.onFileSelected(a,1))}),e._UZ(1,"img",9),e.TgZ(2,"div")(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"span"),e._uU(7,"Pdf , PNG, TIFF ,JPEG formats are allowed"),e.qZA()()()}if(2&n){const r=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,1,r.label))}}function S(n,i){if(1&n&&e._UZ(0,"img",17),2&n){const r=e.oxw(3);e.Q6J("src",r.imgURL,e.LSH)}}function q(n,i){1&n&&e._UZ(0,"img",18)}function Y(n,i){if(1&n){const r=e.EpF();e.TgZ(0,"div",11)(1,"div",12)(2,"div",13),e.NdJ("click",function(){e.CHM(r),e.oxw(2);const a=e.MAs(2);return e.KtG(a.click())}),e._UZ(3,"img",14),e.qZA(),e.YNc(4,S,1,1,"img",15),e.YNc(5,q,1,0,"img",16),e.qZA()()}if(2&n){const r=e.oxw(2);e.xp6(4),e.Q6J("ngIf",r.singleFile&&!r.editMode),e.xp6(1),e.Q6J("ngIf",r.singleFile&&r.editMode)}}function k(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Y,6,2,"div",10),e.BQk()),2&n){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.imgURL)}}function J(n,i){1&n&&e._UZ(0,"img",26)}function Q(n,i){1&n&&e._UZ(0,"img",27)}function G(n,i){if(1&n&&(e.TgZ(0,"div",21)(1,"div",22)(2,"div"),e.YNc(3,J,1,0,"img",23),e.YNc(4,Q,1,0,"img",24),e.TgZ(5,"span",25),e._uU(6),e.qZA()()()()),2&n){const r=i.$implicit,t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",!t.singleFile&&!t.checkFile(r)),e.xp6(1),e.Q6J("ngIf",!t.singleFile&&t.checkFile(r)),e.xp6(2),e.hij(" ",r.attachment?r.attachment:r.name," ")}}function B(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",19),e.YNc(2,G,7,3,"div",20),e.qZA(),e.BQk()),2&n){const r=e.oxw();e.xp6(2),e.Q6J("ngForOf",r.selectedFiles)}}function $(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LABELS.FORM.VALIDATIONS.FILE_NOT_ALLOWED")," "))}function X(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LABELS.FORM.VALIDATIONS.FIELD_IS_REQUIRED")," "))}function j(n,i){if(1&n&&(e.TgZ(0,"div",28),e.YNc(1,X,3,3,"div",5),e.qZA()),2&n){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.formControl?null:r.formControl.hasError("required"))}}const V=function(n){return{"is-image-preview":n}};let z=(()=>{class n{constructor(){this.selectedFiles=[],this.singleFile=!0,this.allowedTypes=["png","jpg","jpeg","gif"],this.canAccept="image/*",this.previews=[],this.errorType="",this.editMode=!1,this.onRemoveAttachment=new e.vpe,this.oldAttachments=[],this.onAttachmentChange=new e.vpe}ngOnInit(){}checkType(r){return console.log(this.oldAttachments),this.fileType=r.type.split("/").pop().toLowerCase(),this.allowedTypes.includes(this.fileType)?(this.errorType="",!0):(this.errorType="notAllowedType",!1)}ngOnChanges(r){console.log(this.oldAttachments),console.log(r.oldDocumentAttachments),this.editMode&&void 0!==r.oldAttachments.previousValue&&r.oldAttachments.previousValue!==r.oldAttachments.currentValue&&this.oldAttachments&&(this.selectedFiles=this.oldAttachments,this.singleFile&&(this.imgURL=this.oldAttachments[0],console.log(this.imgURL)))}checkFile(r){return r.type?"application/pdf"!==r.type:"pdf"!==r.attachment.split(".")}writeValue(){}registerOnChange(){}registerOnTouched(){}onFileSelected(r,t){if(!0===this.singleFile){this.selectedFiles=[];let a={};if(1===t)for(let p of r)this.selectedFiles.push(p),a=this.checkType(r[0]);else this.selectedFiles=r.target.files,this.selectedFiles.length?a=this.checkType(r.target.files[0]):this.imgURL="";if(this.selectedFiles.length&&a){let p=new FileReader;p.readAsDataURL(this.selectedFiles[0]),p.onload=u=>{this.imgURL=p.result}}}else 1===t?this.selectedFiles=r:r.target.files.length>0&&(this.selectedFiles=[],Array.from(r.target.files).forEach(a=>{this.selectedFiles.push(a)}));this.onAttachmentChange.emit(this.selectedFiles),this.formControl?.markAsTouched(),this.formControl?.markAsDirty(),this.formControl?.setValue(this.selectedFiles)}emitValidFiles(){this.onAttachmentChange.emit(this.selectedFiles)}handleRemoveFile(r){if(this.singleFile)this.fileDropRef.nativeElement.value="",this.imgURL="";else if(this.selectedFiles[r].id)this.onRemoveAttachment.emit({index:r,attachmentId:this.selectedFiles[r]?.id});else{const t=Array.from(this.selectedFiles);t.splice(r,1),this.selectedFiles=t,this.onAttachmentChange.emit(this.selectedFiles)}!this.selectedFiles.length&&this.formControl?.reset(),this.formControl?.markAsTouched(),this.formControl?.markAsDirty()}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["upload-file"]],viewQuery:function(r,t){if(1&r&&e.Gf(D,5),2&r){let a;e.iGM(a=e.CRH())&&(t.fileDropRef=a.first)}},inputs:{label:"label",singleFile:"singleFile",allowedTypes:"allowedTypes",canAccept:"canAccept",editMode:"editMode",oldAttachments:"oldAttachments",formGroup:"formGroup",formControl:"formControl"},outputs:{onRemoveAttachment:"onRemoveAttachment",onAttachmentChange:"onAttachmentChange"},features:[e._Bn([{provide:o.JU,useExisting:n,multi:!0}]),e.TTD],decls:10,vars:10,consts:[[1,"upload-file-wrapper",3,"ngClass"],["type","file","name","uploadFile","hidden","true",3,"accept","multiple","change"],["fileDropRef",""],[1,"multiple-preview"],["class","overlay","RtlDir","",3,"click","fileDropped",4,"ngIf"],[4,"ngIf"],[1,"validation-meassages"],["class","ctrl-error",4,"ngIf"],["RtlDir","",1,"overlay",3,"click","fileDropped"],["src","assets/images/upload-icon.png","alt","upload icon"],["class","image-preview-wrapper",4,"ngIf"],[1,"image-preview-wrapper"],[1,"image-preview"],[3,"click"],["src","assets/images/edit.png","alt","edit-icon"],["width","154px","height","140px",3,"src",4,"ngIf"],["src","assets/images/photo-icon.png","width","154px","height","140px",4,"ngIf"],["width","154px","height","140px",3,"src"],["src","assets/images/photo-icon.png","width","154px","height","140px"],[1,"multiple-files-wrapper"],["class","single-file-wrapper",4,"ngFor","ngForOf"],[1,"single-file-wrapper"],[1,"file-preview"],["src","assets/images/pdf.png",4,"ngIf"],["src","assets/images/photo-icon.png",4,"ngIf"],[1,"file-name"],["src","assets/images/pdf.png"],["src","assets/images/photo-icon.png"],[1,"ctrl-error"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"input",1,2),e.NdJ("change",function(p){return t.onFileSelected(p,2)}),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,N,8,3,"div",4),e.YNc(5,k,2,1,"ng-container",5),e.YNc(6,B,3,1,"ng-container",5),e.qZA()(),e.TgZ(7,"div",6),e.YNc(8,$,3,3,"div",5),e.qZA(),e.YNc(9,j,2,1,"div",7)),2&r&&(e.Q6J("ngClass",e.VKq(8,V,t.imgURL)),e.xp6(1),e.Q6J("accept",t.canAccept)("multiple",!t.singleFile),e.xp6(3),e.Q6J("ngIf",!t.imgURL),e.xp6(1),e.Q6J("ngIf",t.singleFile&&t.selectedFiles.length),e.xp6(1),e.Q6J("ngIf",!t.singleFile&&t.selectedFiles.length),e.xp6(2),e.Q6J("ngIf","notAllowedType"===t.errorType),e.xp6(1),e.Q6J("ngIf",(null==t.formControl?null:t.formControl.invalid)&&(null==t.formControl?null:t.formControl.errors)&&((null==t.formControl?null:t.formControl.dirty)||(null==t.formControl?null:t.formControl.touched))))},dependencies:[c.mk,c.sg,c.O5,y.C,h.X$],styles:[".upload-file-wrapper[_ngcontent-%COMP%]   .multiple-preview[_ngcontent-%COMP%]{width:100%}.upload-file-wrapper[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:130px;background-color:#f3f5f8;border:1px dashed #dadada;border-radius:6px;cursor:pointer;gap:10px}.upload-file-wrapper[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}@media only screen and (max-width: 600px){.upload-file-wrapper[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{flex-direction:column}.upload-file-wrapper[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:12px;text-align:center;margin-top:10px}}@media only screen and (max-width: 1024px){.upload-file-wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:baseline}}.upload-file-wrapper.is-image-preview[_ngcontent-%COMP%]{justify-content:unset}.upload-file-wrapper.is-image-preview[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{margin:0 20px}.upload-file-wrapper[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]{display:flex;align-items:end}.upload-file-wrapper[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{position:relative;width:154px}.upload-file-wrapper[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background:#ffffff;box-shadow:0 0 10px #4a506624;border-radius:6px;position:absolute;bottom:10px;right:-14px;width:28px;height:28px;display:flex;justify-content:center;align-items:center;cursor:pointer}.upload-file-wrapper[_ngcontent-%COMP%]   .image-preview-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:0 20px;font-weight:500;color:#5d5f6f;cursor:pointer}@media only screen and (max-width: 768px){.upload-file-wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:baseline}.upload-file-wrapper[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{width:100%}}.validation-meassages[_ngcontent-%COMP%]{color:red}.multiple-files-wrapper[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:2px 15px;display:flex;align-items:flex-end;margin:2px 0;min-height:130px;flex-wrap:wrap}.multiple-files-wrapper[_ngcontent-%COMP%]   .single-file-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:5px 10px}.multiple-files-wrapper[_ngcontent-%COMP%]   .single-file-wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]{display:flex;align-items:flex-end;max-width:140px}.multiple-files-wrapper[_ngcontent-%COMP%]   .single-file-wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:baseline}.multiple-files-wrapper[_ngcontent-%COMP%]   .single-file-wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:62px;height:62px}.multiple-files-wrapper[_ngcontent-%COMP%]   .single-file-wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;white-space:nowrap;width:72px;overflow:hidden;text-overflow:ellipsis;display:inline-block;margin-top:10px}.multiple-files-wrapper[_ngcontent-%COMP%]   .single-file-wrapper[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]   .remove-file[_ngcontent-%COMP%]{display:inline-block;color:#5d5f6f;font-size:14px;font-weight:500;margin:0 5px;cursor:pointer;text-transform:capitalize}"]}),n})();function H(n,i){if(1&n&&e._UZ(0,"locale-date-picker",29),2&n){const r=e.oxw();e.Q6J("label","PROPERTY.ISSUING_DATE")("FormControl",r.formControl("propertyDocument","releaseDate"))("isArabicDatePicker",!0)}}function K(n,i){if(1&n&&e._UZ(0,"locale-date-picker",29),2&n){const r=e.oxw();e.Q6J("label","PROPERTY.ISSUING_DATE")("FormControl",r.formControl("propertyDocument","releaseDate"))("isArabicDatePicker",!1)}}function W(n,i){if(1&n&&e._UZ(0,"locale-date-picker",29),2&n){const r=e.oxw();e.Q6J("label","LABELS.FORM.DATE_OF_BIRTH")("FormControl",r.formControl("owner","ownerBirthDay"))("isArabicDatePicker",!0)}}function ee(n,i){if(1&n&&e._UZ(0,"locale-date-picker",29),2&n){const r=e.oxw();e.Q6J("label","LABELS.FORM.DATE_OF_BIRTH")("FormControl",r.formControl("owner","ownerBirthDay"))("isArabicDatePicker",!1)}}function te(n,i){if(1&n&&e._UZ(0,"locale-date-picker",29),2&n){const r=e.oxw();e.Q6J("label","PROPERTY.BUILD_DATE")("FormControl",r.formControl("realEstateDetails","buildDate"))("isArabicDatePicker",!0)}}function re(n,i){if(1&n&&e._UZ(0,"locale-date-picker",29),2&n){const r=e.oxw();e.Q6J("label","PROPERTY.BUILD_DATE")("FormControl",r.formControl("realEstateDetails","buildDate"))("isArabicDatePicker",!1)}}function ne(n,i){if(1&n&&e._UZ(0,"locale-date-picker",29),2&n){const r=e.oxw().index,t=e.oxw();e.Q6J("label","PROPERTY.BUILD_DATE")("FormControl",t.formArrayControl(r,"buildDate"))("isArabicDatePicker",!0)}}function oe(n,i){if(1&n&&e._UZ(0,"locale-date-picker",29),2&n){const r=e.oxw().index,t=e.oxw();e.Q6J("label","PROPERTY.BUILD_DATE")("FormControl",t.formArrayControl(r,"buildDate"))("isArabicDatePicker",!1)}}function ie(n,i){if(1&n&&(e.TgZ(0,"div",9),e._UZ(1,"form-input",11),e.qZA()),2&n){const r=e.oxw().index,t=e.oxw();e.xp6(1),e.Q6J("label","PROPERTY.UNIT_FINISHING")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"furnishedType"))}}function ae(n,i){if(1&n&&(e.TgZ(0,"div",30)(1,"div",31)(2,"h5"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",16)(6,"div",9),e._UZ(7,"form-input",11),e.qZA(),e.TgZ(8,"div",9),e._UZ(9,"form-input",11),e.qZA(),e.TgZ(10,"div",9),e._UZ(11,"form-input",11),e.qZA()(),e.TgZ(12,"div",16)(13,"div",9),e._UZ(14,"form-input",11),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"form-input",11),e.qZA(),e.TgZ(17,"div",9),e._UZ(18,"form-input",11),e.qZA()(),e.TgZ(19,"div",16)(20,"div",9),e.YNc(21,ne,1,3,"locale-date-picker",12),e.YNc(22,oe,1,3,"locale-date-picker",12),e.qZA(),e.TgZ(23,"div",9),e._UZ(24,"form-input",11),e.qZA()(),e.TgZ(25,"div",8)(26,"div",32),e._UZ(27,"form-input",11),e.ALo(28,"translate"),e.qZA(),e.YNc(29,ie,2,3,"div",33),e.qZA(),e.TgZ(30,"h6"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",16)(34,"div",9),e._UZ(35,"form-input",11),e.qZA(),e.TgZ(36,"div",9),e._UZ(37,"form-input",11),e.qZA(),e.TgZ(38,"div",9),e._UZ(39,"form-input",11),e.qZA()(),e.TgZ(40,"div",16)(41,"div",9),e._UZ(42,"form-input",11),e.qZA(),e.TgZ(43,"div",9),e._UZ(44,"form-input",11),e.qZA(),e.TgZ(45,"div",9),e._UZ(46,"form-input",11),e.qZA()(),e.TgZ(47,"div",16)(48,"div",9),e._UZ(49,"form-input",11),e.qZA(),e.TgZ(50,"div",9),e._UZ(51,"form-input",11),e.qZA(),e.TgZ(52,"div",9),e._UZ(53,"form-input",11),e.qZA()(),e.TgZ(54,"div",16)(55,"div",9),e._UZ(56,"form-input",11),e.qZA(),e.TgZ(57,"div",9),e._UZ(58,"form-input",11),e.qZA()(),e.TgZ(59,"div",16)(60,"div",32),e._UZ(61,"form-input",11),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"div",32),e._UZ(64,"form-input",11),e.ALo(65,"translate"),e.qZA()(),e.TgZ(66,"h6"),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"div",34)(70,"div",32),e._UZ(71,"form-input",11),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"div",32),e._UZ(74,"form-input",11),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"div",32),e._UZ(77,"form-input",11),e.ALo(78,"translate"),e.qZA()()()),2&n){const r=i.index,t=e.oxw();let a;e.Q6J("formGroupName",r),e.xp6(3),e.AsE("",e.lcZ(4,80,"PROPERTY.ADD_UNIT_DETAILS")," #",r+1,""),e.xp6(4),e.Q6J("label","PROPERTY.UNIT_NUMBER")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"propertyNumber")),e.xp6(2),e.Q6J("label","PROPERTY.UNIT_USAGE")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"propertyUse")),e.xp6(2),e.Q6J("label","PROPERTY.UNIT_TYPE")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"propertyType")),e.xp6(3),e.Q6J("label","PROPERTY.FLOOR_NUMBER")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"floorNumber")),e.xp6(2),e.Q6J("label","PROPERTY.UNIT_AREA")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"area")),e.xp6(2),e.Q6J("label","PROPERTY.UNIT_FINISHING")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"propertyFinish")),e.xp6(3),e.Q6J("ngIf",t.currentLang===t.Lang.arabic),e.xp6(1),e.Q6J("ngIf",t.currentLang!==t.Lang.arabic),e.xp6(2),e.Q6J("label","PROPERTY.NUMBER_OF_ROOMS")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"roomsNo")),e.xp6(3),e.Q6J("label",e.lcZ(28,82,"PROPERTY.FURNISHED"))("type",t.InputTypes.TOGGLE)("FormControl",t.formArrayControl(r,"furnished")),e.xp6(2),e.Q6J("ngIf",null==(a=t.formArrayControl(r,"furnished"))?null:a.value),e.xp6(2),e.hij("",e.lcZ(32,84,"PROPERTY.UTILITIES"),": "),e.xp6(4),e.Q6J("label","PROPERTY.BED_ROOMS")("type",t.InputTypes.NUMBER)("FormControl",t.formArrayControl(r,"bedRoomsNo")),e.xp6(2),e.Q6J("label","PROPERTY.BATHROOMS")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"bathroomsNo")),e.xp6(2),e.Q6J("label","PROPERTY.HALL")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"hallNo")),e.xp6(3),e.Q6J("label","PROPERTY.MAID_ROOM")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"maidRoomNumber")),e.xp6(2),e.Q6J("label","PROPERTY.KITCHEN")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"kitchenNo")),e.xp6(2),e.Q6J("label","PROPERTY.STORE")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"storesNo")),e.xp6(3),e.Q6J("label","PROPERTY.BACK_YARD")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"backyardNo")),e.xp6(2),e.Q6J("label","PROPERTY.LIVING_ROOM")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"livingRoomNo")),e.xp6(2),e.Q6J("label","PROPERTY.CENTRAL_AC")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"centralAirConditionNumber")),e.xp6(3),e.Q6J("label","PROPERTY.SPLIT_AC")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"airConditionNumber")),e.xp6(2),e.Q6J("label","PROPERTY.DESERT_AC")("type",t.InputTypes.TEXT)("FormControl",t.formArrayControl(r,"desertAirConditionNumber")),e.xp6(3),e.Q6J("label",e.lcZ(62,86,"PROPERTY.DRESSING"))("type",t.InputTypes.TOGGLE)("FormControl",t.formArrayControl(r,"hasDressing")),e.xp6(3),e.Q6J("label",e.lcZ(65,88,"PROPERTY.BUILT_IN_KITCHEN"))("type",t.InputTypes.TOGGLE)("FormControl",t.formArrayControl(r,"hasKitchen")),e.xp6(3),e.hij("",e.lcZ(68,90,"PROPERTY.SERVICES"),": "),e.xp6(4),e.Q6J("label",e.lcZ(72,92,"PROPERTY.GAS"))("type",t.InputTypes.TOGGLE)("FormControl",t.formArrayControl(r,"hasGasMeter")),e.xp6(3),e.Q6J("label",e.lcZ(75,94,"PROPERTY.ELECTRICITY"))("type",t.InputTypes.TOGGLE)("FormControl",t.formArrayControl(r,"hasElectricityMeter")),e.xp6(3),e.Q6J("label",e.lcZ(78,96,"PROPERTY.WATER"))("type",t.InputTypes.TOGGLE)("FormControl",t.formArrayControl(r,"hasWaterMeter"))}}function pe(n,i){if(1&n){const r=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.handleBack())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACTIONS.BACK")," "))}function le(n,i){if(1&n){const r=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.handleNext())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ACTIONS.NEXT")," "))}const g=function(n){return{list:n,key:"id",value:"name"}},se=function(n){return{"mt-5":n}};let R=(()=>{class n{constructor(r,t,a,p,u,Ee,Oe,ve){this.fb=r,this.propertyLogicService=t,this.translationService=a,this.dialog=u,this.toastrService=Ee,this.activatedRoute=Oe,this.router=ve,this.selectedIndex=0,this.allowedTypes=["pdf","png","jpeg","tiff"],this.subs=new I.t,this.editMode=!1,this.oldDocumentAttachments=[],this.oldAttachments=[],this.realEstateAttachments=[],this.addEditProperty=this.fb.group({propertyDocument:this.fb.group({documentTypeId:[null,[o.kI.required]],documentNumber:["",[o.kI.required]],releaseDate:["",[o.kI.required]],attachment:["",[o.kI.required]],id:[null]}),owner:this.fb.group({name:["",[o.kI.required]],ownerNationalId:[null,[o.kI.required]],ownerBirthDay:["",[o.kI.required]],districtId:["",[o.kI.required]],city:[""],area:[""],id:[null]}),realEstateDetails:this.fb.group({name:["",[o.kI.required]],realEstateNumber:["",[o.kI.required]],numOfFloors:[null,[o.kI.required]],numOfProperty:[null,[o.kI.required]],address:["",[o.kI.required]],buildingNumber:["",[o.kI.required]],addationalNumber:["",[o.kI.required]],buildDate:["",[o.kI.required]],realEstateTypeId:[null,[o.kI.required]],realEstateUseId:[null,[o.kI.required]],id:[null]}),properties:this.fb.array([this.handelCreateUnit()])}),this.stepperOrientation=p.observe("(min-width: 800px)").pipe((0,s.U)(({matches:Ze})=>Ze?"horizontal":"vertical"))}ngOnInit(){this.realestateId=+this.activatedRoute.snapshot.params.id,this.editMode=!!this.realestateId,this.subs.add=this.translationService.currentLanguage$.subscribe(r=>{this.currentLang=r,this.propertyTypes$=this.propertyLogicService.getPropertyLookup("RealEstateType").pipe((0,m.d)(1)),this.propertyUsageTypes$=this.propertyLogicService.getPropertyLookup("RealEstateUse").pipe((0,m.d)(1)),this.documentTypes$=this.propertyLogicService.getDocumentTypes().pipe((0,m.d)(1)),this.cities$=this.propertyLogicService.getPropertyLookup("city").pipe((0,m.d)(1))}),this.realestateId&&this.getRealEstateInfo()}onLogoChange(r){this.attachment={};const t=new FormData,a=r[0];t.append("Attachment",a,a.name),this.attachment=t,this.propertyLogicService.uploadAttachments(this.attachment).subscribe(p=>{this.addEditProperty.get("propertyDocument")?.get("attachment")?.patchValue(p.fileName)})}getRealEstateInfo(){this.propertyLogicService.getRealEstateById(this.realestateId).subscribe(r=>{this.addEditProperty.patchValue(r),r.realEstateAttachments.map(t=>{this.realEstateAttachments.push(t.attachment)}),this.oldDocumentAttachments.push(r.propertyDocument.attachment),this.oldAttachments=r.realEstateAttachments,this.areas$=this.propertyLogicService.getCityAreas(r.owner.city).pipe((0,m.d)(1)),this.districts$=this.propertyLogicService.getAreaDistricts(r.owner.area).pipe((0,m.d)(1)),console.log(r),console.log(this.oldDocumentAttachments),console.log(this.cities$)})}onAttachmentsChange(r){this.realEstateAttachments=[];const t=new FormData;for(let a=0;a<r.length;a++){this.attachment={};const p=r[a];t.append("Attachment",p,p.name),this.attachment=t,this.propertyLogicService.uploadAttachments(this.attachment).subscribe(u=>{this.realEstateAttachments.push(u.fileName)})}}onCityChange(r){this.formControl("owner","area").reset(),this.formControl("owner","districtId").reset(),this.areas$=this.propertyLogicService.getCityAreas(r.event.value).pipe((0,m.d)(1))}onDistrictChange(r){this.formControl("owner","districtId").reset(),this.districts$=this.propertyLogicService.getAreaDistricts(r.event.value).pipe((0,m.d)(1))}onSelection(r){this.selectedIndex=r.selectedIndex}get properties(){return this.addEditProperty.get("properties")}handelCreateUnit(){return this.fb.group({id:[null],propertyNumber:["",[o.kI.required]],propertyType:["",[o.kI.required]],propertyUse:["",[o.kI.required]],floorNumber:["",[o.kI.required]],area:["",[o.kI.required]],buildDate:["",[o.kI.required]],propertyFinish:["",[o.kI.required]],roomsNo:[null,[o.kI.required]],furnished:[!1,[o.kI.required]],furnishedType:[""],hasDressing:[!1,[o.kI.required]],hasKitchen:[!1,[o.kI.required]],hasGasMeter:[!1,[o.kI.required]],hasElectricityMeter:[!1,[o.kI.required]],hasWaterMeter:[!1,[o.kI.required]],bedRoomsNo:[null,[o.kI.required]],bathroomsNo:[null,[o.kI.required]],hallNo:[null,[o.kI.required]],maidRoomNumber:[null,[o.kI.required]],kitchenNo:[null,[o.kI.required]],storesNo:[null,[o.kI.required]],backyardNo:[null,[o.kI.required]],livingRoomNo:[null,[o.kI.required]],centralAirConditionNumber:[null,[o.kI.required]],airConditionNumber:[null,[o.kI.required]],desertAirConditionNumber:[null,[o.kI.required]]})}handleAddUnit(){this.properties.push(this.handelCreateUnit())}onDeleteUnit(r,t){this.properties.removeAt(r)}handleNext(){this.selectedIndex<5&&this.selectedIndex++,console.log(this.addEditProperty)}handleBack(){this.selectedIndex>0&&this.selectedIndex--}handleCancel(){this.router.navigateByUrl("/property")}formControl(r,t){return this.addEditProperty?.get(r)?.get(t)}formArrayControl(r,t){return this.properties?.controls[r].get(t)}formGroup(r){return this.addEditProperty?.get(r)}onAddProperty(r){const t={...r.value,realEstateAttachments:this.realEstateAttachments};this.editMode?this.editRealEstate():this.propertyLogicService.createRealEstate(t).subscribe(a=>{this.toastrService.showToastr("Real Estate Created successfully",_.V.success),this.router.navigateByUrl("/property")},()=>{this.toastrService.showToastr("An error occured when executing the create statement ,try again !",_.V.error)})}editRealEstate(){const r={...this.addEditProperty.value,realEstateAttachments:this.realEstateAttachments};this.propertyLogicService.editRealEstate(r).subscribe(t=>{this.toastrService.showToastr("Real Estate Updated Successfully",_.V.success),this.router.navigateByUrl("/property")})}get InputTypes(){return A.o}get Lang(){return P.U}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(o.qu),e.Y36(E),e.Y36(O.D),e.Y36(M.Yg),e.Y36(v.uw),e.Y36(U._),e.Y36(f.gz),e.Y36(f.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-edit-property"]],decls:124,vars:168,consts:[["RtlDir","",1,"add-edit-property"],[1,"content-wrapper"],["autocomplete","off",3,"formGroup","ngSubmit"],["RtlDir","",1,"form-stepper",3,"orientation","selectedIndex","selectionChange"],[3,"label","stepControl"],["autocomplete","off",3,"formGroup"],[1,"property-tab"],[1,"form-wrapper","mt-5"],[1,"form-row"],[1,"form-control-wrapper"],[3,"label","type","selectOptions","FormControl"],[3,"label","type","FormControl"],[3,"label","FormControl","isArabicDatePicker",4,"ngIf"],["label","PROPERTY.UPLOAD_A_COPY_OF_PROPERTY_DOCUMENT","canAccept","application/pdf,image/png,image/jpeg,image/tiff\n                            ",3,"singleFile","formGroup","formControl","editMode","oldAttachments","allowedTypes","onAttachmentChange"],[3,"label","type","selectOptions","FormControl","selectedOption"],[3,"stepControl","label"],[1,"form-row","equal-columns"],["formArrayName","properties"],["class","form-wrapper mt-5 unit-wrapper",3,"formGroupName",4,"ngFor","ngForOf"],[1,"add-btn-wrapper",3,"ngClass"],[1,"ac-btn","btn-fill",3,"click"],[3,"label"],[1,"form-control-wrapper","mt-5"],["label","PROPERTY.ADD_ATTACHMENTS","canAccept","application/pdf,image/png,image/jpeg,image/tiff\n                    ",3,"singleFile","editMode","oldAttachments","allowedTypes","onAttachmentChange"],[1,"add-edit-actions","mt-1"],["type","button",1,"ac-btn","btn-outlined",3,"click"],["type","button","class","ac-btn btn-outlined",3,"click",4,"ngIf"],["type","button","class","ac-btn btn-fill",3,"click",4,"ngIf"],["type","submit",1,"ac-btn","btn-outlined",3,"disabled"],[3,"label","FormControl","isArabicDatePicker"],[1,"form-wrapper","mt-5","unit-wrapper",3,"formGroupName"],[1,"unit-title"],[1,"form-toggle-wrapper"],["class","form-control-wrapper",4,"ngIf"],[1,"form-row","equal-columns","mb-1"],["type","button",1,"ac-btn","btn-fill",3,"click"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return t.onAddProperty(t.addEditProperty)}),e.TgZ(3,"mat-stepper",3),e.NdJ("selectionChange",function(p){return t.onSelection(p)}),e.ALo(4,"async"),e.TgZ(5,"mat-step",4),e.ALo(6,"translate"),e.TgZ(7,"form",5)(8,"div",6)(9,"h4"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",7)(13,"div",8)(14,"div",9),e._UZ(15,"form-input",10),e.ALo(16,"translate"),e.ALo(17,"async"),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"form-input",11),e.qZA()(),e.TgZ(20,"div",9),e.YNc(21,H,1,3,"locale-date-picker",12),e.YNc(22,K,1,3,"locale-date-picker",12),e.qZA(),e.TgZ(23,"div",9)(24,"upload-file",13),e.NdJ("onAttachmentChange",function(p){return t.onLogoChange(p)}),e.qZA()()()()()(),e.TgZ(25,"mat-step",4),e.ALo(26,"translate"),e.TgZ(27,"form",5)(28,"div",6)(29,"h4"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"div",7)(33,"div",8)(34,"div",9),e._UZ(35,"form-input",11),e.qZA(),e.TgZ(36,"div",9),e._UZ(37,"form-input",11),e.qZA()(),e.TgZ(38,"div",9),e.YNc(39,W,1,3,"locale-date-picker",12),e.YNc(40,ee,1,3,"locale-date-picker",12),e.qZA(),e.TgZ(41,"h6"),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"div",8)(45,"div",9)(46,"form-input",14),e.NdJ("selectedOption",function(p){return t.onCityChange(p)}),e.ALo(47,"translate"),e.ALo(48,"async"),e.qZA()(),e.TgZ(49,"div",9)(50,"form-input",14),e.NdJ("selectedOption",function(p){return t.onDistrictChange(p)}),e.ALo(51,"translate"),e.ALo(52,"async"),e.qZA()(),e.TgZ(53,"div",9),e._UZ(54,"form-input",10),e.ALo(55,"translate"),e.ALo(56,"async"),e.qZA()()()()()(),e.TgZ(57,"mat-step",15),e.ALo(58,"translate"),e.TgZ(59,"form",5)(60,"div",6)(61,"h4"),e._uU(62),e.ALo(63,"translate"),e.qZA(),e.TgZ(64,"div",7)(65,"div",16)(66,"div",9),e._UZ(67,"form-input",10),e.ALo(68,"translate"),e.ALo(69,"async"),e.qZA(),e.TgZ(70,"div",9),e._UZ(71,"form-input",10),e.ALo(72,"translate"),e.ALo(73,"async"),e.qZA(),e.TgZ(74,"div",9),e.YNc(75,te,1,3,"locale-date-picker",12),e.YNc(76,re,1,3,"locale-date-picker",12),e.qZA()(),e.TgZ(77,"div",16)(78,"div",9),e._UZ(79,"form-input",11),e.qZA(),e.TgZ(80,"div",9),e._UZ(81,"form-input",11),e.qZA(),e.TgZ(82,"div",9),e._UZ(83,"form-input",11),e.qZA()(),e.TgZ(84,"div",16)(85,"div",9),e._UZ(86,"form-input",11),e.qZA(),e.TgZ(87,"div",9),e._UZ(88,"form-input",11),e.qZA(),e.TgZ(89,"div",9),e._UZ(90,"form-input",11),e.qZA()(),e.TgZ(91,"div",9),e._UZ(92,"form-input",11),e.qZA()()()()(),e.TgZ(93,"mat-step",15),e.ALo(94,"translate"),e.TgZ(95,"form",5)(96,"div",17)(97,"div",6)(98,"h4"),e._uU(99),e.ALo(100,"translate"),e.qZA(),e.YNc(101,ae,79,98,"div",18),e.TgZ(102,"div",19)(103,"button",20),e.NdJ("click",function(){return t.handleAddUnit()}),e._uU(104),e.ALo(105,"translate"),e.qZA()()()()()(),e.TgZ(106,"mat-step",21),e.ALo(107,"translate"),e.TgZ(108,"div",6)(109,"h4"),e._uU(110),e.ALo(111,"translate"),e.qZA(),e.TgZ(112,"div",22)(113,"upload-file",23),e.NdJ("onAttachmentChange",function(p){return t.onAttachmentsChange(p)}),e.qZA()()()()(),e.TgZ(114,"div",24)(115,"div")(116,"button",25),e.NdJ("click",function(){return t.handleCancel()}),e._uU(117),e.ALo(118,"translate"),e.qZA(),e.YNc(119,pe,3,3,"button",26),e.YNc(120,le,3,3,"button",27),e.TgZ(121,"button",28),e._uU(122),e.ALo(123,"translate"),e.qZA()()()()()()),2&r&&(e.xp6(2),e.Q6J("formGroup",t.addEditProperty),e.xp6(1),e.Q6J("orientation",e.lcZ(4,100,t.stepperOrientation))("selectedIndex",t.selectedIndex),e.xp6(2),e.Q6J("label",e.lcZ(6,102,"PROPERTY.PROPERTY_DOCUMENTS"))("stepControl",t.formGroup("propertyDocument")),e.xp6(2),e.Q6J("formGroup",t.formGroup("propertyDocument")),e.xp6(3),e.Oqu(e.lcZ(11,104,"PROPERTY.ADD_PROPERTY_DOCUMENT")),e.xp6(5),e.Q6J("label",e.lcZ(16,106,"PROPERTY.LEGAL_DOCUMENT_TYPE"))("type",t.InputTypes.SELECT)("selectOptions",e.VKq(154,g,e.lcZ(17,108,t.documentTypes$)))("FormControl",t.formControl("propertyDocument","documentTypeId")),e.xp6(4),e.Q6J("label","PROPERTY.PROPERTY_DOCUMENT_NUMBER")("type",t.InputTypes.NUMBER)("FormControl",t.formControl("propertyDocument","documentNumber")),e.xp6(2),e.Q6J("ngIf",t.currentLang===t.Lang.arabic),e.xp6(1),e.Q6J("ngIf",t.currentLang!==t.Lang.arabic),e.xp6(2),e.Q6J("singleFile",!0)("formGroup",t.addEditProperty)("formControl",t.formControl("propertyDocument","attachment"))("editMode",t.editMode)("oldAttachments",t.oldAttachments)("allowedTypes",t.allowedTypes),e.xp6(1),e.Q6J("label",e.lcZ(26,110,"PROPERTY.PROPERTY_OWNERS"))("stepControl",t.formGroup("owner")),e.xp6(2),e.Q6J("formGroup",t.formGroup("owner")),e.xp6(3),e.Oqu(e.lcZ(31,112,"PROPERTY.ADD_PROPERTY_OWNER")),e.xp6(5),e.Q6J("label","PROPERTY.NATIONAL_ID")("type",t.InputTypes.TEXT)("FormControl",t.formControl("owner","ownerNationalId")),e.xp6(2),e.Q6J("label","LABELS.FORM.FULL_NAME")("type",t.InputTypes.TEXT)("FormControl",t.formControl("owner","name")),e.xp6(2),e.Q6J("ngIf",t.currentLang===t.Lang.arabic),e.xp6(1),e.Q6J("ngIf",t.currentLang!==t.Lang.arabic),e.xp6(2),e.hij("",e.lcZ(43,114,"LABELS.FORM.ADDRESS_IN_SAUDI"),": "),e.xp6(4),e.Q6J("label",e.lcZ(47,116,"LABELS.CITY"))("type",t.InputTypes.SELECT)("selectOptions",e.VKq(156,g,e.lcZ(48,118,t.cities$)))("FormControl",t.formControl("owner","city")),e.xp6(4),e.Q6J("label",e.lcZ(51,120,"LABELS.AREA"))("type",t.InputTypes.SELECT)("selectOptions",e.VKq(158,g,e.lcZ(52,122,t.areas$)))("FormControl",t.formControl("owner","area")),e.xp6(4),e.Q6J("label",e.lcZ(55,124,"LABELS.DISTRICT"))("type",t.InputTypes.SELECT)("selectOptions",e.VKq(160,g,e.lcZ(56,126,t.districts$)))("FormControl",t.formControl("owner","districtId")),e.xp6(3),e.Q6J("stepControl",t.formGroup("realEstateDetails"))("label",e.lcZ(58,128,"PROPERTY.PROPERTY_DETAILS")),e.xp6(2),e.Q6J("formGroup",t.formGroup("realEstateDetails")),e.xp6(3),e.Oqu(e.lcZ(63,130,"PROPERTY.ADD_PROPERTY_DETAILS")),e.xp6(5),e.Q6J("label",e.lcZ(68,132,"PROPERTY.PROPERTY_TYPE"))("type",t.InputTypes.SELECT)("selectOptions",e.VKq(162,g,e.lcZ(69,134,t.propertyTypes$)))("FormControl",t.formControl("realEstateDetails","realEstateTypeId")),e.xp6(4),e.Q6J("label",e.lcZ(72,136,"PROPERTY.PROPERTY_USAGE"))("type",t.InputTypes.SELECT)("selectOptions",e.VKq(164,g,e.lcZ(73,138,t.propertyUsageTypes$)))("FormControl",t.formControl("realEstateDetails","realEstateUseId")),e.xp6(4),e.Q6J("ngIf",t.currentLang===t.Lang.arabic),e.xp6(1),e.Q6J("ngIf",t.currentLang!==t.Lang.arabic),e.xp6(3),e.Q6J("label","PROPERTY.PROPERTY_NUMBER")("type",t.InputTypes.TEXT)("FormControl",t.formControl("realEstateDetails","realEstateNumber")),e.xp6(2),e.Q6J("label","PROPERTY.NUMBER_OF_FLOORS")("type",t.InputTypes.NUMBER)("FormControl",t.formControl("realEstateDetails","numOfFloors")),e.xp6(2),e.Q6J("label","PROPERTY.TOTAL_NUMBER_OF_FLOORS")("type",t.InputTypes.NUMBER)("FormControl",t.formControl("realEstateDetails","numOfProperty")),e.xp6(3),e.Q6J("label","LABELS.FORM.NAME")("type",t.InputTypes.TEXT)("FormControl",t.formControl("realEstateDetails","name")),e.xp6(2),e.Q6J("label","LABELS.FORM.ADDRESS_IN_SAUDI")("type",t.InputTypes.TEXT)("FormControl",t.formControl("realEstateDetails","address")),e.xp6(2),e.Q6J("label","PROPERTY.BUILDING_NUMBER")("type",t.InputTypes.TEXT)("FormControl",t.formControl("realEstateDetails","buildingNumber")),e.xp6(2),e.Q6J("label","PROPERTY.ADDITIONAL_NUMBER")("type",t.InputTypes.TEXT)("FormControl",t.formControl("realEstateDetails","addationalNumber")),e.xp6(1),e.Q6J("stepControl",t.formGroup("properties"))("label",e.lcZ(94,140,"PROPERTY.UNITS_DETAILS")),e.xp6(2),e.Q6J("formGroup",t.addEditProperty),e.xp6(4),e.Oqu(e.lcZ(100,142,"PROPERTY.ADD_UNITS_DETAILS")),e.xp6(2),e.Q6J("ngForOf",t.properties.controls),e.xp6(1),e.Q6J("ngClass",e.VKq(166,se,0===t.properties.length)),e.xp6(2),e.hij(" ",e.lcZ(105,144,"ACTIONS.ADD_UNIT")," "),e.xp6(2),e.Q6J("label",e.lcZ(107,146,"PROPERTY.ATTCHMENTS")),e.xp6(4),e.Oqu(e.lcZ(111,148,"PROPERTY.ATTCHMENTS")),e.xp6(3),e.Q6J("singleFile",!1)("editMode",t.editMode)("oldAttachments",t.oldAttachments)("allowedTypes",t.allowedTypes),e.xp6(4),e.hij(" ",e.lcZ(118,150,"ACTIONS.CANCEL")," "),e.xp6(2),e.Q6J("ngIf",t.selectedIndex>0),e.xp6(1),e.Q6J("ngIf",4!==t.selectedIndex),e.xp6(1),e.Q6J("disabled",t.addEditProperty.invalid),e.xp6(1),e.hij(" ",e.lcZ(123,152,"ACTIONS.SAVE")," "))},dependencies:[c.mk,c.sg,c.O5,Z.C0,Z.Vq,y.C,o._Y,o.JJ,o.JL,o.oH,o.sg,o.x0,o.CE,w.s,F.L,z,c.Ov,h.X$],styles:['.add-edit-property[_ngcontent-%COMP%]{display:grid;column-gap:15px;height:100%}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{margin:2%;border-radius:20px;padding:15px 20px}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{position:relative}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:after{content:" ";width:91px;color:#000;background:linear-gradient(172deg,#47858b -15.74%,#4e55a2 111.09%);height:5px;position:absolute;bottom:-15px;left:3px;border-radius:8px}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   .unit-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:15px}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   .unit-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   .unit-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f44336;cursor:pointer}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   .unit-wrapper[_ngcontent-%COMP%]{border:1px solid #eee;padding:10px;border-radius:5px;margin-bottom:15px}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;column-gap:15px;grid-template-columns:repeat(auto-fill,minmax(360px,1fr))}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   .form-row.equal-columns[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(270px,1fr))}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   .add-btn-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:20%}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:15px}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   .form-toggle-wrapper[_ngcontent-%COMP%]{align-items:center;display:flex;height:62px}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add-edit-actions[_ngcontent-%COMP%]{border-radius:9px;background-color:#fff;padding:10px 20px;display:flex;justify-content:flex-end}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add-edit-actions[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;gap:15px;background-color:#fff}.add-edit-property[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add-edit-actions[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:120px}.add-edit-property.rtl[_ngcontent-%COMP%]{font-family:Cairo,sans-serif!important}.add-edit-property.rtl[_ngcontent-%COMP%]   .property-tab[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:after{right:3px;left:unset}  .mat-stepper-horizontal,   .mat-stepper-vertical{background-color:transparent;height:95%}  .mat-stepper-horizontal.rtl,   .mat-stepper-vertical.rtl{font-family:Cairo,sans-serif!important}  .mat-stepper-horizontal.rtl .mat-horizontal-stepper-header .mat-step-icon,   .mat-stepper-vertical.rtl .mat-horizontal-stepper-header .mat-step-icon{margin-right:unset;margin-left:8px}  .mat-horizontal-stepper-header-container{gap:24px;flex-direction:column;padding:15px 0;border-radius:6px;background-color:#fff}  .mat-step-header[aria-selected=true]{background-color:#f4f4f4;border-radius:9px}  .mat-step-header{width:165px!important}  .mat-horizontal-stepper-wrapper{display:grid!important;grid-template-columns:260px calc(100% - 270px)!important;column-gap:15px!important;height:99%}  .mat-horizontal-content-container{border:1px solid #eee;border-radius:9px;padding:24px!important;background-color:#fff}  .mat-stepper-horizontal-line{display:none}  .mat-step-header:hover:not([aria-disabled]){border-radius:9px}  .mat-horizontal-stepper-content{position:relative;height:100%}']}),n})();var b=l(9646),de=l(2026),ce=l(4859),T=l(8255),me=l(7633);function ue(n,i){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,5,"PROPERTY.PROPERTY_NUMBER")),e.xp6(3),e.Oqu(e.lcZ(6,7,"LABELS.OWNER")),e.xp6(3),e.Oqu(e.lcZ(9,9,"PROPERTY.PROPERTY_TYPE")),e.xp6(3),e.Oqu(e.lcZ(12,11,"PROPERTY.PROPERTY_USAGE")),e.xp6(3),e.Oqu(e.lcZ(15,13,"ACTIONS.ACTIONS")))}const ge=function(n){return["/property/edit-property",n]};function fe(n,i){if(1&n){const r=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",11)(10,"button",12),e._UZ(11,"i",13),e.qZA(),e.TgZ(12,"mat-menu",11,14)(14,"button",15),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",16),e.NdJ("click",function(){const p=e.CHM(r).$implicit,u=e.oxw(2);return e.KtG(u.handleRemoveProperty(p.id))}),e._uU(18),e.ALo(19,"translate"),e.qZA()()()()}if(2&n){const r=i.$implicit,t=e.MAs(13);e.xp6(2),e.hij(" ",null==r?null:r.realEstateNumber," "),e.xp6(2),e.hij(" ",null==r?null:r.ownerName," "),e.xp6(2),e.hij(" ",null==r?null:r.realEstateType," "),e.xp6(2),e.hij(" ",null==r?null:r.realEstateUse," "),e.xp6(2),e.Q6J("matMenuTriggerFor",t),e.xp6(4),e.Q6J("routerLink",e.VKq(12,ge,null==r?null:r.id)),e.xp6(1),e.Oqu(e.lcZ(16,8,"ACTIONS.EDIT")),e.xp6(3),e.Oqu(e.lcZ(19,10,"ACTIONS.DELETE"))}}function he(n,i){}function _e(n,i){if(1&n){const r=e.EpF();e.TgZ(0,"data-table",7),e.NdJ("pageChange",function(a){e.CHM(r);const p=e.oxw();return e.KtG(p.onPageChange(a))}),e.ALo(1,"async"),e.YNc(2,ue,16,15,"ng-template",null,8,e.W1O),e.YNc(4,fe,20,14,"ng-template",null,9,e.W1O),e.YNc(6,he,0,0,"ng-template",null,10,e.W1O),e.qZA()}if(2&n){const r=e.oxw();e.Q6J("dataSource",e.lcZ(1,1,r.propertyTable$))}}const ye=function(){return["/property/add-property"]},Te=[{title:"Properties",path:"",children:[{title:"Properties",path:"",component:(()=>{class n{constructor(r,t,a){this.translationService=r,this.propertyLogicService=t,this.dialog=a,this.propertyTable$=(0,b.of)({data:[],length:0,pageSize:0,pageIndex:0,emptyState:"No Data Found!"}),this.propertyPagingPayload={pagedSearch:{pageIndex:1,pageSize:8}}}get InputTypes(){return A.o}ngOnInit(){this.getPropertyListing(),this.translationService.currentLanguage$.subscribe(r=>{this.currentLang=r})}onPageChange(r){this.propertyPagingPayload.pagedSearch.pageIndex=r.pageIndex+1,this.getPropertyListing()}handleRemoveProperty(r){return this.dialog.open(de.$,{maxWidth:"550px",minWidth:"500px",data:{title:"ACTIONS.DELETE_REAL_ESTATE",message:"LABELS.FORM.ARE_YOU_SURE",actionLabel:"ACTIONS.DELETE"}}).afterClosed().subscribe(p=>{if(!p)return p;this.propertyLogicService.deleteProperty(r).subscribe(u=>{this.getPropertyListing()})})}getPropertyListing(){this.propertyLogicService.getRealEstates(this.propertyPagingPayload).subscribe(r=>{this.propertyTable$=(0,b.of)({data:r.items,length:r.items.length,pageSize:8,pageIndex:1,emptyState:"LABELS.NO_DATA"})})}get Lang(){return P.U}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(O.D),e.Y36(E),e.Y36(v.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["property-listing"]],decls:12,vars:9,consts:[[1,"page-container","property-listing"],[1,"page-header"],[1,"btn-wrapper"],[1,"ac-btn","btn-fill",3,"routerLink"],[1,"page-content"],[1,"table-wrapper"],["class","preview__table",3,"dataSource","pageChange",4,"ngIf"],[1,"preview__table",3,"dataSource","pageChange"],["tableHead",""],["tableRows",""],["loaderRef",""],["RtlDir",""],["mat-button","",3,"matMenuTriggerFor"],[1,"fa-solid","fa-ellipsis"],["menu","matMenu"],["mat-menu-item","","RtlDir","",3,"routerLink"],["mat-menu-item","","RtlDir","",3,"click"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2)(6,"button",3),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",4)(10,"section",5),e.YNc(11,_e,8,3,"data-table",6),e.qZA()()()),2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,4,"LABELS.PROPERTIES")),e.xp6(3),e.Q6J("routerLink",e.DdM(8,ye)),e.xp6(1),e.hij(" ",e.lcZ(8,6,"LABELS.ADD_NEW_PROPERTY")," "),e.xp6(4),e.Q6J("ngIf",t.propertyTable$))},dependencies:[c.O5,ce.lW,T.VK,T.OP,T.p6,y.C,me.Q,f.rH,c.Ov,h.X$],styles:[".table-wrapper[_ngcontent-%COMP%]{min-height:200px}"]}),n})()},{title:"Add Property",path:"add-property",component:R},{title:"Edit Property",path:"edit-property/:id",component:R}]}];let Ce=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.Bz.forChild(Te),f.Bz]}),n})();var Ae=l(2271);let Pe=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,h.aw,Ae.m,Ce]}),n})()}}]);